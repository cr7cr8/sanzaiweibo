(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){e.exports=n.p+"static/media/logo.23a61dbb.svg"},223:function(e,t,n){e.exports=n(475)},228:function(e,t,n){},356:function(e,t,n){e.exports=n.p+"static/media/clippath.4d716ddf.svg"},380:function(e,t){},397:function(e,t){},399:function(e,t){},431:function(e,t){},432:function(e,t){},475:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(114),i=n.n(r),c=n(6),l=(n(228),n(4)),u=n(1),s=n(12),d=(n(116),n(217),n(40)),f=n.n(d);function g(){return localStorage.getItem("token")}f.a.interceptors.request.use((function(e){return e})),f.a.interceptors.response.use((function(e){return e})),g()&&(f.a.defaults.headers.common["x-auth-token"]=g());f.a;var m=f.a,b="/api",p=n(65),h=n.n(p),y=n(10),x=n(115),E=n.n(x),O=n(15),v=Object(a.createContext)(),k=function(e,t){var n=!Object(O.useMediaQuery)({query:"(hover: none)"}),o=Object(a.useState)(e),r=Object(u.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(t),s=Object(u.a)(l,2),d=s[0],f=s[1];return[i,d,function(e){n?c((function(t){return Math.max((t+e).toFixed(1),.1)})):f((function(t){return Math.max((t+e).toFixed(1),.1)}))},function(e,t){c(e),f(t)}]},j=function(e){var t=Object(a.useContext)(M),n=t.userName,r=t.axios,i=Object(a.useState)(null),c=Object(u.a)(i,2),s=c[0],d=c[1];Object(a.useEffect)((function(){s&&(h(s.color1),j(s.color2),P(s.color3),W(s.color4),I(s.color5),U(s.fontSizePC1,s.fontSizePhone1),V(s.fontSizePC2,s.fontSizePhone2),te(s.fontSizePC3,s.fontSizePhone3),ce(s.fontSizePC4,s.fontSizePhone4),ge(s.fontSizePC5,s.fontSizePhone5),he(s.logoImageSizePC),Oe(s.logoImageSizePhone),Se(s.logoTextSizePC),ze(s.logoTextSizePhone),We(s.avatarSizePC),Ie(s.avatarSizePhone),Re(s.backPicOrianPC),Je(s.backPicOrianPhone),Ve(s.backPicOpacity),Ge(s.editorWidthPC),at(s.editorWidthPhone))}),[s]);var f=!Object(O.useMediaQuery)({query:"(hover: none)"}),g=Object(a.useState)("rgb(62,39,35,0.8)"),m=Object(u.a)(g,2),p=m[0],h=m[1],y=Object(a.useState)("rgb(255,224,130,0.8)"),x=Object(u.a)(y,2),E=x[0],j=x[1],S=Object(a.useState)("rgb(162,39,135,0.3)"),C=Object(u.a)(S,2),w=C[0],P=C[1],z=Object(a.useState)("rgb(255,224,130,0.5)"),_=Object(u.a)(z,2),B=_[0],W=_[1],L=Object(a.useState)("rgb(62,39,35,0.5)"),A=Object(u.a)(L,2),T=A[0],I=A[1],F=k(2,1.5),K=Object(u.a)(F,4),N=K[0],R=K[1],D=K[2],U=K[3],H=k(2,1.5),J=Object(u.a)(H,4),q=J[0],Q=J[1],Y=J[2],V=J[3],X=k(2,2),Z=Object(u.a)(X,4),$=Z[0],G=Z[1],ee=Z[2],te=Z[3],ne=k(2,2),ae=Object(u.a)(ne,4),oe=ae[0],re=ae[1],ie=ae[2],ce=ae[3],le=k(2,2),ue=Object(u.a)(le,4),se=ue[0],de=ue[1],fe=ue[2],ge=ue[3],me=Object(a.useState)(48),be=Object(u.a)(me,2),pe=be[0],he=be[1],ye=Object(a.useState)(48),xe=Object(u.a)(ye,2),Ee=xe[0],Oe=xe[1],ve=Object(a.useState)(1.5),ke=Object(u.a)(ve,2),je=ke[0],Se=ke[1],Ce=Object(a.useState)(2),we=Object(u.a)(Ce,2),Pe=we[0],ze=we[1],Me=Object(a.useState)(70),_e=Object(u.a)(Me,2),Be=_e[0],We=_e[1],Le=Object(a.useState)(50),Ae=Object(u.a)(Le,2),Te=Ae[0],Ie=Ae[1],Fe=Object(a.useState)("horizontal"),Ke=Object(u.a)(Fe,2),Ne=Ke[0],Re=Ke[1],De=Object(a.useState)("horizontal"),Ue=Object(u.a)(De,2),He=Ue[0],Je=Ue[1],qe=Object(a.useState)(.5),Qe=Object(u.a)(qe,2),Ye=Qe[0],Ve=Qe[1],Xe=Object(a.useState)({width:80,minWidth:0,maxWidth:5e4}),Ze=Object(u.a)(Xe,2),$e=Ze[0],Ge=Ze[1],et=Object(a.useState)({width:100,minWidth:0,maxWidth:5e4}),tt=Object(u.a)(et,2),nt=tt[0],at=tt[1],ot=Object(a.useState)(16),rt=Object(u.a)(ot,2),it=rt[0],ct=rt[1],lt=Object(a.useCallback)((function(e){f?(he((function(t){return Math.max((t+20*e).toFixed(1),1)})),Se((function(t){return Math.max((t+e).toFixed(1),.1)}))):(Oe((function(t){return Math.max((t+20*e).toFixed(1),1)})),ze((function(t){return Math.max((t+e).toFixed(1),.1)})))}),[]),ut=Object(a.useCallback)((function(e){f?We((function(t){return Math.max((t+e).toFixed(1),10)})):Ie((function(t){return Math.max((t+e).toFixed(1),10)}))}),[]),st=Object(a.useCallback)((function(e){f?Re(e):Je(e)}),[]),dt=Object(a.useCallback)((function(e,t,n){f?Ge((function(a){var o=a.width,r=void 0===o?0:o,i=a.minWidth,c=void 0===i?0:i,l=a.maxWidth,u=void 0===l?0:l;return{width:Math.min(Math.max((r+e).toFixed(1),0),100),minWidth:Math.max(c+t,0),maxWidth:Math.max(u+n,0)}})):at((function(a){var o=a.width,r=a.minWidth,i=a.maxWidth;return{width:Math.min(Math.max((o+e).toFixed(1),0),100),minWidth:Math.max(r+t,0),maxWidth:Math.max(i+n,0)}}))}),[]),ft=Object(a.useMemo)((function(){return{color1:p,color2:E,color3:w,color4:B,color5:T,fontSizePC1:N,fontSizePC2:q,fontSizePC3:$,fontSizePC4:oe,fontSizePC5:se,fontSizePhone1:R,fontSizePhone2:Q,fontSizePhone3:G,fontSizePhone4:re,fontSizePhone5:de,logoImageSizePC:pe,logoImageSizePhone:Ee,logoTextSizePC:je,logoTextSizePhone:Pe,avatarSizePC:Be,avatarSizePhone:Te,backPicOrianPC:Ne,backPicOrianPhone:He,backPicOpacity:Ye,editorWidthPC:$e,editorWidthPhone:nt,fontSize1:f?N+"rem":R+"rem",fontSize2:f?q+"rem":Q+"rem",fontSize3:f?$+"rem":G+"rem",fontSize4:f?oe+"rem":re+"rem",fontSize5:f?se+"rem":de+"rem",logoImageSize:f?pe+"px":Ee+"px",logoTextSize:f?je+"em":Pe+"em",avatarSize:f?Be+"px":Te+"px",backPicOrian:f?Ne:He,editorWidth:f?$e.width+"%":nt.width+"%",editorMinWidth:f?$e.minWidth+"px":nt.minWidth+"px",editorMaxWidth:f?$e.maxWidth+"px":nt.maxWidth+"px",ratioRemAndPx:it,setRatioRemAndPx:ct}}),[p,E,w,B,T,N,q,$,oe,se,R,Q,G,re,de,pe,Ee,je,Pe,Be,Te,Ne,He,Ye,$e,nt,it,ct]),gt=Object(a.useCallback)((function(){n&&r.post("".concat(b,"/theme"),{theme:ft}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.response)}))}),[ft]),mt=Object(a.useCallback)((function(){n&&r.get("".concat(b,"/theme")).then((function(e){var t=e.data;t&&d(t.theme)})).catch((function(e){console.log(e.response)}))}),[a.useState]);Object(a.useMemo)(mt,[n]);var bt=Object(a.useState)(!1),pt=Object(u.a)(bt,2),ht=pt[0],yt=pt[1],xt=Object(a.useState)(!1),Et=Object(u.a)(xt,2),Ot=Et[0],vt=Et[1],kt=Object(a.useState)(!1),jt=Object(u.a)(kt,2),St=jt[0],Ct=jt[1],wt=Object(a.useState)(!1),Pt=Object(u.a)(wt,2),zt=Pt[0],Mt=Pt[1];return o.a.createElement(v.Provider,{value:{color1:p,color2:E,color3:w,color4:B,color5:T,setColor1:h,setColor2:j,setColor3:P,setColor4:W,setColor5:I,fontSize1:f?N:R,setFontSize1:D,fontSize2:f?q:Q,setFontSize2:Y,fontSize3:f?$:G,setFontSize3:ee,fontSize4:f?oe:re,setFontSize4:ie,fontSize5:f?se:de,setFontSize5:fe,logoImageSize:f?pe:Ee,logoTextSize:f?je:Pe,setLogoSize:lt,avatarSize:f?Be:Te,setAvatarSize:ut,backPicOrian:f?Ne:He,setBackPicOrian:st,backPicOpacity:Ye,setBackPicOpacity:Ve,editorWidth:f?$e:nt,setEditorWidth:dt,showThemeSetter:ht,setShowThemeSetter:yt,showLogin:Ot,setShowLogin:vt,showRegister:St,setShowRegister:Ct,showLogout:zt,setShowLogout:Mt,uploadTheme:gt,theme:ft,ratioRemAndPx:it,setRatioRemAndPx:ct}},o.a.createElement(l.a,{theme:ft},e.children))};function S(){var e=Object(c.a)(["\n    display: flex;\n    position:relative;\n    flex-direction:column;\n    width: ",";\n    height:",";\n    background-color: ",";\n    /* justify-content: center; */\n    align-items: center;\n    font-size:",";\n    box-shadow: 0px 0px 2px #5f5f5f,\n                /* offset */\n                0px 0px 0px 5px #ecf0f3,\n                /*bottom right */\n                8px 8px 15px #a7aaaf,\n                /* top left */\n                -8px -8px 15px #ffffff;\n\n             \n    \n    & > div:nth-child(1){     \n        align-self:flex-end;\n    }\n\n    & > div >input , label,  button:nth-child(1) {\n        font-size: ",";\n    }\n    & > div >input  {\n        width: ",";\n    }\n                \n"]);return S=function(){return e},e}function C(){var e=Object(c.a)(["\n    z-index:10;\n    display: flex;\n    background-color: rgb(25,25,25,0.2);\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    left: 0; \n    top: 0;\n"]);return C=function(){return e},e}var w=l.b.div(C()),P=l.b.div(S(),(function(e){return e.isComputer?"50%":"80%"}),(function(e){return e.isComputer?"70%":"90%"}),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1}),(function(e){return e.theme.fontSize1}),(function(e){return e.isComputer?"auto":"100%"})),z=function(){var e=!Object(O.useMediaQuery)({query:"(hover: none)"}),t=Object(a.useContext)(M).register,n=Object(a.useContext)(v),r=n.showRegister,i=n.setShowRegister,c=n.theme,l=Object(a.useState)(""),s=Object(u.a)(l,2),d=s[0],f=s[1],g=Object(a.useState)(""),m=Object(u.a)(g,2),b=m[0],p=m[1];return r&&o.a.createElement(w,null,o.a.createElement(P,{isComputer:e},o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){i(!1)}},"close")),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"login"},"login"),o.a.createElement("br",null),o.a.createElement("input",{id:"login",type:"text",value:d,placeholder:" ",onChange:function(e){f(e.currentTarget.value)}})),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"password"},"password"),o.a.createElement("br",null),o.a.createElement("input",{id:"password",type:"password",value:b,placeholder:" ",onChange:function(e){p(e.currentTarget.value)}})),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"password"},"password again"),o.a.createElement("br",null),o.a.createElement("input",{id:"password",type:"password",placeholder:" "})),o.a.createElement("div",null,o.a.createElement("button",{style:{marginTop:"10px"},onClick:function(){t(d,b,c)}},"Submit"))))},M=(n(250),Object(a.createContext)()),_=function(e){var t=Object(a.useState)(localStorage.getItem("token")?h()(localStorage.getItem("token")).userName:""),n=Object(u.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(r?[r]:[]),l=Object(u.a)(c,2),d=l[0],f=l[1];Object(a.useMemo)((function(){if(!r)return null;m.get("".concat(b,"/user/getfriendslist")).then((function(e){f(Object(s.a)(new Set([].concat(Object(s.a)(e.data),[r]))))})).catch((function(e){console.log(e)}))}),[r]);var g=Object(a.useState)([]),p=Object(u.a)(g,2),x=p[0],E=p[1];function O(){return r?m.post("".concat(b,"/article/all"),x.map((function(e){return e._id}))).then((function(e){return E((function(t){if(0===e.data.length)return d.length>1&&alert("\u76ee\u524d\u53ea\u6709\u8fd9\u4e9b"),t;var n=[].concat(Object(s.a)(t),Object(s.a)(e.data)).sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0}));return console.log(n),n})),e})):m.get("".concat(b,"/article/all2")).then((function(e){return E((function(t){return Object(s.a)(e.data).sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0}))})),e}))}Object(a.useMemo)(O,[r]);var v=Object(a.useState)(0),k=Object(u.a)(v,2),j=k[0],S=k[1];function C(){r&&m.get("".concat(b,"/article/count")).then((function(e){S(Number(e.data))}))}Object(a.useMemo)(C,[r,d,x]);var w=Object(a.useState)(),P=Object(u.a)(w,2),z=P[0],_=P[1];Object(a.useMemo)((function(){m.get(r?"".concat(b,"/backpicture/downloadbackpicture/").concat(r):y.isMobile?"https://picsum.photos/500/800":"https://picsum.photos/1000/800",{responseType:"arraybuffer",onDownloadProgress:function(e){}}).then((function(e){var t=btoa(new Uint8Array(e.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));_("data:"+e.headers["content-type"]+";base64,"+t)})).catch((function(e){console.log(e.response)}))}),[r]);var B=Object(a.useState)(),W=Object(u.a)(B,2),L=W[0],A=W[1];function T(){if(!r)return null;m.get("".concat(b,"/avatar/downloadavatar/").concat(r),{responseType:"arraybuffer",onDownloadProgress:function(e){}}).then((function(e){var t=btoa(new Uint8Array(e.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));A("data:"+e.headers["content-type"]+";base64,"+t)})).catch((function(e){console.log(e.response)}))}Object(a.useMemo)(T,[r]);var I=Object(a.useState)({}),F=Object(u.a)(I,2),K=F[0],N=F[1];return o.a.createElement(M.Provider,{value:{userName:r,setUserName:i,userBackPicture:z,setUserBackPicture:_,uploadBackPicture:function(e){if(!r)return console.log("Please login first"),alert("please login first"),null;var t=new FormData;return t.append("file",e),t.append("obj",JSON.stringify({filename:e.name.trim(),ownerName:r,uploadTime:Date.now()})),m.post("".concat(b,"/backpicture/uploadbackpicture"),t,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.floor(100*e.loaded/e.total);console.log("Uploading backPicture --- "+t)}}).then((function(e){}))},userAvatar:L,setUserAvatar:A,uploadAvatar:function(e){if(!r)return console.log("Please login first"),alert("please login first"),null;var t=new FormData;t.append("file",e),t.append("obj",JSON.stringify({filename:e.name.trim(),ownerName:r,uploadTime:Date.now()})),m.post("".concat(b,"/avatar/uploadavatar"),t,{headers:{"content-type":"multipart/form-data"},responseType:"arraybuffer",onUploadProgress:function(e){var t=Math.floor(100*e.loaded/e.total);console.log(t)}}).then((function(e){T()}))},login:function(e,t){m.post("".concat(b,"/user/login"),{userName:e,password:t}).then((function(e){console.log(e.data),localStorage.setItem("token",e.headers["x-auth-token"]),window.location.assign("/"),console.log(h()(localStorage.getItem("token")))})).catch((function(e){alert(e.response),console.log(e.response)}))},register:function(e,t,n){m.post("".concat(b,"/user/register"),{userName:e,password:t,theme:n}).then((function(e){console.log(e.data),localStorage.setItem("token",e.headers["x-auth-token"]),console.log(h()(localStorage.getItem("token"))),window.location.assign("/")})).catch((function(e){alert(e.response),console.log(e.response)}))},logout:function(){localStorage.removeItem("token"),window.location.assign("/")},axios:m,picDataList:K,setPicDataList:N,friendsList:d,setFriendsList:f,uploadFriendsList:function(e){if(!r)return console.log("Please login first"),alert("please login first"),null;m.post("".concat(b,"/user/updatefriendslist"),e).then((function(t){console.log(t.data),console.log(x),console.log(e),E((function(t){return t.filter((function(t){return e.includes(t.ownerName)}))}))})).catch((function(e){console.log(e)}))},contentList:x,setContentList:E,downloadContentList:O,uploadContentList:function(e){return r&&m.post("".concat(b,"/article"),{ownerName:r,content:e}).then((function(e){return E((function(t){return[e.data].concat(Object(s.a)(t))})),e}))},deleteContentList:function(e){return r&&m.get("".concat(b,"/article/delete/").concat(e)).then((function(t){return E((function(t){return t.filter((function(t){return t._id!==e}))})),t}))},countContentNum:C,contentNum:j,setContentNum:S}},e.children)};function B(){var e=Object(c.a)(["\n   \n    /* background-color:red; */\n    display: flex;\n    justify-content: center;\n    /* align-items:center; */\n    \n    /* align-items: ","; */\n    \n    width: auto;\n    height:100%;\n    overflow:visible;\n    flex-direction:column;\n\n\n    & > div:nth-child(1){\n        display: flex;\n        justify-content: center;\n        background-color:tan;\n    };\n    & > div:nth-child(2){\n        display: flex;\n        justify-content: center;\n        align-items:center;\n        background-color:transparent;\n    };\n"]);return B=function(){return e},e}function W(){var e=Object(c.a)(["\n   width: 40px;\n   height:40px;\n   margin:1px;\n"]);return W=function(){return e},e}var L=[["rgb(183,28,28)","rgb(198,40,40)","rgb(211,47,47)","rgb(229,57,53)","rgb(244,67,54)","rgb(239,83,80)","rgb(229,115,115)","rgb(239,154,154)","rgb(255,205,210)","rgb(255,235,238)"],["rgb(136,14,79)","rgb(173,20,87)","rgb(194,24,91)","rgb(216,27,96)","rgb(233,30,99)","rgb(236,64,122)","rgb(240,98,146)","rgb(244,143,177)","rgb(248,187,208)","rgb(252,228,236)"],["rgb(74,20,140)","rgb(106,27,154)","rgb(123,31,162)","rgb(142,36,170)","rgb(156,39,176)","rgb(171,71,188)","rgb(186,104,200)","rgb(206,147,216)","rgb(225,190,231)","rgb(243,229,245)"],["rgb(49,27,146)","rgb(69,39,160)","rgb(81,45,168)","rgb(94,53,177)","rgb(103,58,183)","rgb(126,87,194)","rgb(149,117,205)","rgb(179,157,219)","rgb(209,196,233)","rgb(237,231,246)"],["rgb(26,35,126)","rgb(40,53,147)","rgb(48,63,159)","rgb(57,73,171)","rgb(63,81,181)","rgb(92,107,192)","rgb(121,134,203)","rgb(159,168,218)","rgb(197,202,233)","rgb(232,234,246)"],["rgb(13,71,161)","rgb(21,101,192)","rgb(25,118,210)","rgb(30,136,229)","rgb(33,150,243)","rgb(66,165,245)","rgb(100,181,246)","rgb(144,202,249)","rgb(187,222,251)","rgb(227,242,253)"],["rgb(1,87,155)","rgb(2,119,189)","rgb(2,136,209)","rgb(3,155,229)","rgb(3,169,244)","rgb(41,182,246)","rgb(79,195,247)","rgb(129,212,250)","rgb(179,229,252)","rgb(225,245,254)"],["rgb(0,96,100)","rgb(0,131,143)","rgb(0,151,167)","rgb(0,172,193)","rgb(0,188,212)","rgb(38,198,218)","rgb(77,208,225)","rgb(128,222,234)","rgb(178,235,242)","rgb(224,247,250)"],["rgb(0,77,64)","rgb(0,105,92)","rgb(0,121,107)","rgb(0,137,123)","rgb(0,150,136)","rgb(38,166,154)","rgb(77,182,172)","rgb(128,203,196)","rgb(178,223,219)","rgb(224,242,241)"],["rgb(27,94,32)","rgb(46,125,50)","rgb(56,142,60)","rgb(67,160,71)","rgb(76,175,80)","rgb(102,187,106)","rgb(129,199,132)","rgb(165,214,167)","rgb(200,230,201)","rgb(232,245,233)"],["rgb(51,105,30)","rgb(85,139,47)","rgb(104,159,56)","rgb(124,179,66)","rgb(139,195,74)","rgb(156,204,101)","rgb(174,213,129)","rgb(197,225,165)","rgb(220,237,200)","rgb(241,248,233)"],["rgb(130,119,23)","rgb(158,157,36)","rgb(175,180,43)","rgb(192,202,51)","rgb(205,220,57)","rgb(212,225,87)","rgb(220,231,117)","rgb(230,238,156)","rgb(240,244,195)","rgb(249,251,231)"],["rgb(245,127,23)","rgb(249,168,37)","rgb(251,192,45)","rgb(253,216,53)","rgb(255,235,59)","rgb(255,238,88)","rgb(255,241,118)","rgb(255,245,157)","rgb(255,249,196)","rgb(255,253,231)"],["rgb(255,111,0)","rgb(255,143,0)","rgb(255,160,0)","rgb(255,179,0)","rgb(255,193,7)","rgb(255,202,40)","rgb(255,213,79)","rgb(255,224,130)","rgb(255,236,179)","rgb(255,248,225)"],["rgb(230,81,0)","rgb(239,108,0)","rgb(245,124,0)","rgb(251,140,0)","rgb(255,152,0)","rgb(255,167,38)","rgb(255,183,77)","rgb(255,204,128)","rgb(255,224,178)","rgb(255,243,224)"],["rgb(191,54,12)","rgb(216,67,21)","rgb(230,74,25)","rgb(244,81,30)","rgb(255,87,34)","rgb(255,112,67)","rgb(255,138,101)","rgb(255,171,145)","rgb(255,204,188)","rgb(251,233,231)"],["rgb(62,39,35)","rgb(78,52,46)","rgb(93,64,55)","rgb(109,76,65)","rgb(121,85,72)","rgb(141,110,99)","rgb(161,136,127)","rgb(188,170,164)","rgb(215,204,200)","rgb(239,235,233)"],["rgb(33,33,33)","rgb(66,66,66)","rgb(97,97,97)","rgb(117,117,117)","rgb(158,158,158)","rgb(189,189,189)","rgb(224,224,224)","rgb(238,238,238)","rgb(245,245,245)","rgb(250,250,250)"],["rgb(38,50,56)","rgb(55,71,79)","rgb(69,90,100)","rgb(84,110,122)","rgb(96,125,139)","rgb(120,144,156)","rgb(144,164,174)","rgb(176,190,197)","rgb(207,216,220)","rgb(236,239,241)"]],A=function(e){var t=e.opacity;return o.a.createElement("svg",{style:{opacity:t},width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("rect",{x:"0",y:"0",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"25%",y:"0",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"50%",y:"0",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"75%",y:"0",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"0",y:"25%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"25%",y:"25%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"50%",y:"25%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"75%",y:"25%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"0",y:"50%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"25%",y:"50%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"50%",y:"50%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"75%",y:"50%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"0",y:"75%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"25%",y:"75%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}),o.a.createElement("rect",{x:"50%",y:"75%",width:"25%",height:"25%",stroke:"none",fill:"#eee",strokeWidth:"1"}),o.a.createElement("rect",{x:"75%",y:"75%",width:"25%",height:"25%",stroke:"none",fill:"gray",strokeWidth:"1"}))},T=l.b.div.attrs((function(e){return{style:{backgroundColor:e.color,clipPath:e.match?"circle(40%)":""}}}))(W()),I=l.b.div(B(),(function(){return Object(O.useMediaQuery)({query:"(hover: none)"}),"flex-start"}));function F(e){var t=e.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d(?:\.\d?))\))?/);return t?{red:t[1],green:t[2],blue:t[3],alpha:t[4]}:{}}var K=function(e){var t=e.color,n=e.setColor,r=Object(a.useRef)(0);Object(a.useEffect)((function(){return console.log("painting ColorSetter --- ",r.current),function(){r.current++}}));var i=F(t),c=i.red,l=i.green,u=i.blue,s=i.alpha;return o.a.createElement(I,null,o.a.createElement("div",null,L.map((function(e,t){return o.a.createElement("div",{key:t},e.map((function(e,t){return o.a.createElement(T,{key:t,color:e,match:e==="rgb(".concat(c,",").concat(l,",").concat(u,")"),onClick:function(){n((function(){var t=F(e),n=t.red,a=t.green,o=t.blue;return"rgb(".concat(n,",").concat(a,",").concat(o,",").concat(s,")")}))}})})))}))),o.a.createElement("div",null,function(){for(var e=[],t=function(t){e.push(o.a.createElement(T,{key:t,match:s===(1.1-(t+1)/10).toFixed(1),color:"rgb(".concat(c,",").concat(l,",").concat(u,",1)"),onClick:function(e){n((function(){return"rgb(".concat(c,",").concat(l,",").concat(u,",").concat((1.1-(t+1)/10).toFixed(1),")")}))}},o.a.createElement(A,{opacity:((t+1)/10-.1).toFixed(1)})))},a=0;a<10;a++)t(a);return e.map((function(e){return e}))}()))};function N(){var e=Object(c.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nbackground-color:",";\nwidth:100%;\nheight:100%;\n\n& > button{\n    font-size:",";\n}\n"]);return N=function(){return e},e}var R=l.b.div(N(),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1})),D=function(e){var t=e.fontSize,n=e.setFontSize,r=Object(a.useRef)(0);return Object(a.useEffect)((function(){return console.log("painting FontSizeSetter --- ",r.current),function(){r.current++}})),o.a.createElement(R,null,o.a.createElement("button",{onClick:function(){n(.1)}},"Increase 0.1 to ",t,"rem"),o.a.createElement("button",{onClick:function(){n(-.1)}},"Decrease 0.1 to ",t,"rem"))};function U(){var e=Object(c.a)(["\n\n    display: flex; \n    justify-content: center;\n    align-items:center;\n    width: 100%;\n    height:100%;\n    overflow:visible;\n    flex-direction:column;\n    background-color:",";\n\n\n    & > button{\n        font-size:",";\n    }\n\n\n"]);return U=function(){return e},e}var H=l.b.div(U(),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1})),J=function(){var e=Object(a.useRef)(),t=Object(a.useState)(),n=Object(u.a)(t,2),r=n[0],i=n[1],c=Object(a.useContext)(M),l=c.userName,s=c.uploadAvatar,d=Object(a.useContext)(v).setAvatarSize;return o.a.createElement(H,null,l&&o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"file",style:{marginBottom:"10px",width:"100%",display:"none"},ref:e,onClick:function(e){e.currentTarget.value=null},onChange:function(e){e.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)?i(e.currentTarget.files[0]):i(null)}}),o.a.createElement("button",{style:{marginBottom:"10px"},onClick:function(t){i(null),e.current.click()}},"Pick a image"),r&&o.a.createElement("div",{style:{marginBottom:"10px"}},r.name),r&&o.a.createElement("img",{src:r?URL.createObjectURL(r):"",width:"100px"}),o.a.createElement("button",{style:{marginTop:"10px"},onClick:function(e){r?s(r):alert("no pic is selected")}},"Submit")),o.a.createElement("button",{onClick:function(){d(5)}},"Bigger"),o.a.createElement("button",{onClick:function(){d(-5)}},"Smaller"))};function q(){var e=Object(c.a)(["\n\n    display: flex; \n    justify-content: center;\n    align-items:center;\n    width: 100%;\n    height:100%;\n    overflow:visible;\n    flex-direction:column;\n    background-color:",";\n\n\n    &  button{\n        font-size:",";\n    }\n\n\n"]);return q=function(){return e},e}var Q=l.b.div(q(),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1})),Y=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(a.useContext)(M),c=i.userName,l=i.setUserBackPicture,s=i.uploadBackPicture,d=Object(a.useContext)(v),f=d.backPicOrian,g=d.setBackPicOrian,m=(d.backPicOpacity,d.setBackPicOpacity),b=Object(a.useRef)();return o.a.createElement(Q,null,c&&o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"file",style:{marginBottom:"10px",width:"100%",display:"none"},ref:b,onClick:function(e){e.currentTarget.value=null},onChange:function(e){e.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)?r(e.currentTarget.files[0]):r(null)}}),o.a.createElement("button",{style:{marginBottom:"10px"},onClick:function(e){r(null),b.current.click()}},"Pick a image"),n&&o.a.createElement("div",{style:{marginBottom:"10px"}},n.name),n&&o.a.createElement("img",{src:n?URL.createObjectURL(n):"",width:"100px"}),o.a.createElement("button",{style:{marginTop:"10px"},onClick:function(e){n?s(n).then((function(){n&&l(URL.createObjectURL(n))})):alert("no pic is selected")}},"Submit")),"horizontal"===f?"Horizontal":"Verticle",o.a.createElement("button",{onClick:function(){g("horizontal"===f?"verticle":"horizontal")}},"horizontal"===f?"setTo Verticle":"setTo Horizontal"),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){m((function(e){return Math.min(e+.1,1)}))}},"\u589e\u52a0\u900f\u660e"),o.a.createElement("button",{onClick:function(){m((function(e){return Math.max(e-.1,0)}))}},"\u964d\u4f4e\u900f\u660e")))},V=n(67);function X(){var e=Object(c.a)(["\n      font-size:   ",";\n"]);return X=function(){return e},e}var Z=l.b.button(X(),(function(e){return e.theme.fontSize1}));function $(e){Object(a.useContext)(v).fontSize1;return o.a.createElement(Z,e,e.children)}function G(){var e=Object(c.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nbackground-color:",";\nwidth:100%;\nheight:100%;\nflex-direction:column;\n\n& > button{\n    font-size:",";\n}\n"]);return G=function(){return e},e}var ee=l.b.div(G(),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1}));function te(){var e=Object(a.useContext)(v);Object(V.a)(e);var t=Object(a.useContext)(v),n=t.setEditorWidth,r=t.editorWidth;return o.a.createElement(ee,null,o.a.createElement($,{onClick:function(e){n(5,0,0)}},"Add width ",r.width,"%"),o.a.createElement($,{onClick:function(e){n(-5,0,0)}},"Reduce width ",r.width,"%"),o.a.createElement($,{onClick:function(e){n(0,10,0)}},"Add minWidth ",r.minWidth,"px"),o.a.createElement($,{onClick:function(e){n(0,-10,0)}},"reduce minWidth ",r.minWidth,"px"))}var ne="editorWidth",ae=function(){var e=!Object(O.useMediaQuery)({query:"(hover: none)"}),t=Object(a.useContext)(v),n=t.color1,r=t.color2,i=t.color3,c=t.color4,l=t.setColor1,s=t.setColor2,d=t.setColor3,f=t.setColor4,g=(t.logoImageSize,t.logoTextSize),m=t.setLogoSize,b=t.fontSize1,p=t.fontSize2,h=t.fontSize3,y=t.fontSize4,x=t.fontSize5,E=t.setFontSize1,k=t.setFontSize2,j=t.setFontSize3,S=t.setFontSize4,C=t.setFontSize5,w=t.showThemeSetter,P=t.setShowThemeSetter,z=t.uploadTheme,M=Object(a.useState)(ne),_=Object(u.a)(M,2),B=_[0],W=_[1];return w&&o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",width:"100%",left:"0px",top:"0px",height:"100%",zIndex:10}},o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:e?"center":"flex-start",width:e?"80%":"90%",height:e?"80%":"90%",overflow:"auto",boxShadow:"\n                0px 0px 2px #5f5f5f,\n                /* offset */\n                0px 0px 0px 5px #ecf0f3,\n                /*bottom right */\n                8px 8px 15px #a7aaaf,\n                /* top left */\n                -8px -8px 15px #ffffff",backgroundColor:i}},o.a.createElement("div",{style:{display:"flex",position:"sticky",top:"0",left:"0",justifyContent:"center",width:"100%",backgroundColor:r}},o.a.createElement("select",{defaultValue:ne,style:{fontSize:b+"rem"},onChange:function(e){ne=String(e.target.value),W(ne)}},o.a.createElement("option",{value:"color1"},"logo\u5b57\u989c\u8272"),o.a.createElement("option",{value:"color2"},"\u5bfc\u822a\u6761\u989c\u8272"),o.a.createElement("option",{value:"color3"},"\u80cc\u666f\u56fe\u989c\u8272"),o.a.createElement("option",{value:"color4"},"\u5fae\u535a\u5757\u989c\u8272"),o.a.createElement("option",{value:"0"},"logo\u5927\u5c0f"),o.a.createElement("option",{value:"1"},"\u6309\u94ae\u5927\u5c0f"),o.a.createElement("option",{value:"2"},"\u5b57\u4f53\u5927\u5c0f"),o.a.createElement("option",{value:"3"},"\u6ca1\u6709\u5728\u7528"),o.a.createElement("option",{value:"4"},"\u6ca1\u6709\u5728\u7528"),o.a.createElement("option",{value:"5"},"\u6ca1\u6709\u5728\u7528"),o.a.createElement("option",{value:"avatar"},"\u5934\u50cf\u56fe\u6807"),o.a.createElement("option",{value:"backPicture"},"\u80cc\u666f\u56fe\u7247"),o.a.createElement("option",{value:"editorWidth"},"\u5fae\u535a\u5757\u5bbd\u5ea6")),o.a.createElement("button",{style:{position:"absolute",right:"0px",fontSize:b+"rem"},onClick:function(){P(!1),z()}},"\u5173\u95ed")),"color1"===B&&o.a.createElement(K,{color:n,setColor:l}),"color2"===B&&o.a.createElement(K,{color:r,setColor:s}),"color3"===B&&o.a.createElement(K,{color:i,setColor:d}),"color4"===B&&o.a.createElement(K,{color:c,setColor:f}),"0"===B&&o.a.createElement(D,{fontSize:g,setFontSize:m}),"1"===B&&o.a.createElement(D,{fontSize:b,setFontSize:E}),"2"===B&&o.a.createElement(D,{fontSize:p,setFontSize:k}),"3"===B&&o.a.createElement(D,{fontSize:h,setFontSize:j}),"4"===B&&o.a.createElement(D,{fontSize:y,setFontSize:S}),"5"===B&&o.a.createElement(D,{fontSize:x,setFontSize:C}),"avatar"===B&&o.a.createElement(J,null),"backPicture"===B&&o.a.createElement(Y,null),"editorWidth"===B&&o.a.createElement(te,null)))};function oe(){var e=Object(c.a)(["\n    display: flex;\n    position:relative;\n    flex-direction:column;\n    width: ",";\n    height:",";\n    background-color: ",";\n    /* justify-content: center; */\n    align-items: center;\n    font-size:",";\n    box-shadow: 0px 0px 2px #5f5f5f,\n                /* offset */\n                0px 0px 0px 5px #ecf0f3,\n                /*bottom right */\n                8px 8px 15px #a7aaaf,\n                /* top left */\n                -8px -8px 15px #ffffff;\n    \n            \n\n    \n    \n\n    & > div:nth-child(1){     \n             align-self:flex-end;\n    }\n\n    & > div >input , label,  button:nth-child(1) {\n        font-size: ",";\n    }\n    & > div >input  {\n        width: ",";\n    }\n    \n\n   \n\n  \n"]);return oe=function(){return e},e}function re(){var e=Object(c.a)(["\nz-index:10;\n    display: flex;\n    background-color: rgb(25,25,25,0.2);\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    left: 0; \n    top: 0;\n"]);return re=function(){return e},e}var ie=l.b.div(re()),ce=l.b.div(oe(),(function(e){return e.isComputer?"50%":"80%"}),(function(e){return e.isComputer?"70%":"90%"}),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1}),(function(e){return e.theme.fontSize1}),(function(e){return e.isComputer?"auto":"100%"})),le=function(){var e=!Object(O.useMediaQuery)({query:"(hover: none)"}),t=Object(a.useContext)(M).login,n=Object(a.useContext)(v),r=n.showLogin,i=n.setShowLogin,c=Object(a.useState)(""),l=Object(u.a)(c,2),s=l[0],d=l[1],f=Object(a.useState)(""),g=Object(u.a)(f,2),m=g[0],b=g[1];return r&&o.a.createElement(ie,null,o.a.createElement(ce,{isComputer:e},o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){i(!1)}},"close")),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"login"},"login"),o.a.createElement("br",null),o.a.createElement("input",{id:"login",type:"text",placeholder:"",value:s,onChange:function(e){d(e.currentTarget.value)}})),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"password"},"password"),o.a.createElement("br",null),o.a.createElement("input",{id:"password",type:"password",placeholder:" ",value:m,onChange:function(e){b(e.currentTarget.value)}})),o.a.createElement("div",null,o.a.createElement("button",{style:{marginTop:"10px"},onClick:function(){t(s,m)}},"Login"))))};function ue(){var e=Object(c.a)(["\n    display: flex;\n    position:relative;\n    flex-direction:column;\n    width: ",";\n    height:",";\n    background-color: ",";\n    /* justify-content: center; */\n    align-items: center;\n    font-size:",";\n    box-shadow: 0px 0px 2px #5f5f5f,\n                /* offset */\n                0px 0px 0px 5px #ecf0f3,\n                /*bottom right */\n                8px 8px 15px #a7aaaf,\n                /* top left */\n                -8px -8px 15px #ffffff;\n\n    & > div:nth-child(1){     \n             align-self:flex-end;\n    }\n    & > div >input , label,  button:nth-child(1), button:nth-child(2) {\n        font-size: ",";\n    }\n"]);return ue=function(){return e},e}function se(){var e=Object(c.a)(["\n    z-index:10;\n    display: flex;\n    background-color: rgb(25,25,25,0.2);\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    left: 0; \n    top: 0;\n\n \n"]);return se=function(){return e},e}var de=l.b.div(se()),fe=l.b.div(ue(),(function(e){return e.isComputer?"50%":"80%"}),(function(e){return e.isComputer?"70%":"90%"}),(function(e){return e.theme.color3}),(function(e){return e.theme.fontSize1}),(function(e){return e.theme.fontSize1})),ge=function(){var e=!Object(O.useMediaQuery)({query:"(hover: none)"}),t=Object(a.useContext)(M).logout,n=Object(a.useContext)(v),r=n.showLogout,i=n.setShowLogout;return r&&o.a.createElement(de,null,o.a.createElement(fe,{isComputer:e},o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){i(!1)}},"close")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){t()}},"OK"),o.a.createElement("button",{onClick:function(e){i(!1)}},"Cancel"))))},me=n(9),be=n(18);function pe(){var e=Object(c.a)(["\nposition:relative;\ndisplay:inline;\n\n\n"]);return pe=function(){return e},e}function he(){var e=Object(c.a)(["\n \ndisplay:flex;\njustify-content:center;\nbackground-color:pink;\n\n        /* "," */\nwidth: "," ;\nheight:"," ;\n\n\noverflow:hidden;\n\nborder-radius:1000px;\n\nbox-shadow:   ",";\n\n\n"]);return he=function(){return e},e}l.b.div(he(),(function(e){return e.theme.fontSize2}),(function(e){var t=e.theme;return e.isSmall?Number(t.avatarSize.replace("px",""))/2+"px":t.avatarSize}),(function(e){var t=e.theme;return e.isSmall?Number(t.avatarSize.replace("px",""))/2+"px":t.avatarSize}),(function(e){e.theme;return e.isSmall?"":"0px 0px 6px #5f5f5f;"})),l.b.img.attrs((function(e){var t=e.oriantation,n=e.theme,a=e.isSmall;return"horizontal"===t?{height:a?Number(n.avatarSize.replace("px",""))/2+"px":n.avatarSize}:"verticle"===t?{width:a?Number(n.avatarSize.replace("px",""))/2+"px":n.avatarSize}:void 0}))(pe());var ye=n(13);function xe(e){var t=e.imgurl,n=e.peopleName,r=e.children,i=(Object(be.a)(e,["imgurl","peopleName","children"]),Object(a.useContext)(v)),c=(i.fontSize1,i.fontSize2),l=(i.ratioRemAndPx,i.setRatioRemAndPx,Object(a.useContext)(M)),u=l.userName,d=(l.contentList,l.deleteContentList,l.friendsList),f=l.setFriendsList,g=l.uploadFriendsList;return o.a.createElement("span",{style:{display:"inline",borderTopLeftRadius:"1000px",borderBottomLeftRadius:"1000px"},onClick:function(e){if(u){if(u===n)return alert("\u65e0\u6cd5\u53d6\u5173\u4f60\u81ea\u5df1"),null;console.log(d);var t=d.includes(n),a=t?window.confirm("\u53d6\u5173"+n):window.confirm("\u5173\u6ce8 "+n);t&&a?f((function(e){var t=e.filter((function(e){return e!==n}));return console.log(t),g(t),t})):a&&!t&&f((function(e){var t=Object(s.a)(new Set([].concat(Object(s.a)(e),[n])));return console.log(t),g(t),t}))}}},o.a.createElement("div",{style:{height:y.isMobile&&y.isFirefox?21.6*c*1.2+"px":16*c*1.2+"px",width:y.isMobile&&y.isFirefox?21.6*c*1.2+"px":16*c*1.2+"px",display:"inline-flex",alignItems:"center",color:"rgba(200,0,0,0)",borderRadius:"1000px",backgroundPosition:"center center",backgroundImage:t||"url(".concat(b,"/avatar/downloadavatar/").concat(n,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",boxShadow:"rgb(180, 180, 180) -2px 0px 3px"}},r))}function Ee(e){var t=e.children,n=(Object(be.a)(e,["children"]),Object(a.useContext)(v)),r=(n.fontSize1,n.fontSize2);n.ratioRemAndPx,n.setRatioRemAndPx;return o.a.createElement("span",{style:Object(ye.a)({lineHeight:"0px",height:16*r*1.2+"px",display:"inline-flex",alignItems:"center"},"display","inline")},t)}function Oe(e){var t=e.peopleName,n=e.imgOnly,r=void 0===n||n,i=Object(be.a)(e,["peopleName","imgOnly"]),c=Object(a.useContext)(M),l=c.userName,u=c.userAvatar,d=(c.contentList,c.deleteContentList,c.friendsList),f=c.setFriendsList,g=c.uploadFriendsList,m=Object(a.useContext)(v),p=m.fontSize1,h=(m.fontSize2,m.ratioRemAndPx,m.setRatioRemAndPx,m.avatarSize);return o.a.createElement("span",i,o.a.createElement("img",{src:t?"".concat(b,"/avatar/downloadavatar/").concat(t):u,style:{display:"inline-block",borderRadius:"1000px",height:h+"px",width:h+"px",boxShadow:t?"":"0px 0px 6px #5f5f5f",verticalAlign:"middle",backgroundColor:"#"+((1<<24)*Math.random()|0).toString(16)},onClick:function(){if(l&&t){if(console.log(d),l===t)return alert("\u65e0\u6cd5\u53d6\u5173\u4f60\u81ea\u5df1"),null;var e=d.includes(t),n=e?window.confirm("\u53d6\u5173"+t):window.confirm("\u5173\u6ce8 "+t);e&&n?f((function(e){var n=e.filter((function(e){return e!==t}));return console.log(n),g(n),n})):n&&!e&&f((function(e){var n=Object(s.a)(new Set([].concat(Object(s.a)(e),[t])));return console.log(n),g(n),n}))}}}),o.a.createElement("span",{style:{fontSize:p+"rem",verticalAlign:"middle"}},r?"":t||l))}function ve(){var e=Object(c.a)(["\n    display:flex;\n\n\n    justify-content:space-around;\n    align-items:center;\n\n    /* background-color:tan; */\n\n\n  & > button {\n      font-size:   ",";\n  }\n\n\n\n"]);return ve=function(){return e},e}function ke(){var e=Object(c.a)(["\n\n    font-size: "," ;\n \n    display:flex;\n    width:auto;\n    justify-content:space-between;\n    align-items:center;\n    \n\n    & > div:nth-child(1) > img:nth-child(1){\n\n        width:","\n\n    }\n\n\n\n\n"]);return ke=function(){return e},e}function je(){var e=Object(c.a)(["\n    z-index:9;\n    color:",";\n    background-color:","; \n   \n    display:flex;\n    flex-wrap:wrap;\n    justify-content:space-around;\n    align-items:center;\n\n     position:sticky;\n    \n    /* left:0px; */\n    top:0px; \n    \n    \n    \n    /* width:100%; */\n    box-shadow: 0px 0px 2px #5f5f5f,\n                /* offset */\n                0px 0px 0px 0px #ecf0f3,\n                /*bottom right */\n                8px -7px 15px #a7aaaf,\n                /* top left */\n                -8px -8px 15px #ffffff;\n               \n"]);return je=function(){return e},e}var Se=l.b.div(je(),(function(e){return e.theme.color1}),(function(e){return e.theme.color2})),Ce=l.b.div(ke(),(function(e){var t=e.theme;return"".concat(t.logoTextSize)}),(function(e){var t=e.theme;return"".concat(t.logoImageSize)})),we=l.b.div(ve(),(function(e){return e.theme.fontSize1})),Pe=function(){var e=Object(a.useContext)(M).userName,t=Object(a.useContext)(v),n=(t.showLogin,t.setShowLogin),r=(t.showRegister,t.setShowRegister),i=(t.showLogout,t.setShowLogout),c=(t.showThemeSetter,t.setShowThemeSetter);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,null),o.a.createElement(le,null),o.a.createElement(z,null),o.a.createElement(ge,null),o.a.createElement(Se,{id:"navbar"},o.a.createElement(Ce,null,o.a.createElement("div",null,o.a.createElement("img",{src:E.a})),o.a.createElement("div",null," ",o.a.createElement("i",null,"\u5c71\u5be8\u5fae\u535a")," ")),o.a.createElement(we,null,!e&&o.a.createElement("button",{onClick:function(){n(!0)}},"\u767b\u5f55"),!e&&o.a.createElement("button",{onClick:function(){r(!0)}},"\u6ce8\u518c"),e&&o.a.createElement("button",{onClick:function(){i(!0)}},"\u6ce8\u9500"),o.a.createElement("button",{onClick:function(){c(!0)}},"\u8bbe\u7f6e"),e&&o.a.createElement(Oe,{ratio:2,imgOnly:!0}))))},ze=n(478),Me=n(479),_e=n(2),Be=n(88),We=n.n(Be),Le=n(47),Ae={linkStyle:{color:"blue",textDecoration:"underline"}};n(356);var Te=n(36);function Ie(e){var t=e.id,n=e.isIcon,r=void 0!==n&&n,i=Object(be.a)(e,["id","isIcon"]),c=Object(a.useContext)(M),l=(c.userName,c.axios),s=c.picDataList,d=c.setPicDataList,f=Object(a.useState)(),g=Object(u.a)(f,2),m=g[0],p=g[1];return Object(a.useEffect)((function(){s[t]?p(s[t]):l.get(r?"".concat(b,"/picture/downloadiconpicture/").concat(t):"".concat(b,"/picture/downloadpicture/").concat(t),{responseType:"arraybuffer"}).then((function(e){var n=btoa(new Uint8Array(e.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));p("data:"+e.headers["content-type"]+";base64,"+n),d((function(a){return Object(me.a)({},a,Object(ye.a)({},t,"data:"+e.headers["content-type"]+";base64,"+n))}))})).catch((function(e){console.log(e.response)}))}),[t]),o.a.createElement("img",Object.assign({src:m,id:t},i))}function Fe(e){var t=e.insertImageBlock,n=e.deleteImageBlock,r=(Object(be.a)(e,["insertImageBlock","deleteImageBlock"]),Object(a.useContext)(M)),i=r.userName,c=r.axios,l=(r.picDataList,r.setPicDataList),s=Object(a.useContext)(Ze),d=s.showPlugin,f=s.toggleShow,g=d.ImagePluginPanel;var m=Object(a.useContext)(v).color2,p=Object(a.useState)(),h=Object(u.a)(p,2),y=h[0],x=h[1],E=Object(a.useState)({}),O=Object(u.a)(E,2),k=O[0],j=O[1],S=Object(a.useState)("\u9009\u53d6\u56fe\u7247"),C=Object(u.a)(S,2),w=C[0],P=C[1],z=Object(a.useRef)();return Object(a.useEffect)((function(){y&&function(e){if(!i)return console.log("Please login first"),alert("please login first"),null;var t=new FormData;return t.append("file",e),t.append("obj",JSON.stringify({filename:e.name.trim(),ownerName:i,uploadTime:Date.now()})),P("0%"),c.post("".concat(b,"/picture/uploadpicture"),t,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=(100*e.loaded/e.total).toFixed(0)+"%";P("100%"===t?"gathering":t)}})}(y).then((function(e){j((function(t){return Object(me.a)({},t,Object(ye.a)({},e.data[0],e.data[1]))})),l((function(t){return Object(me.a)({},t,Object(ye.a)({},e.data[1],URL.createObjectURL(y)))})),t("".concat(b,"/picture/downloadpicture/").concat(e.data[1]),e.data[1],URL.createObjectURL(y)),x(null),P("\u9009\u53d6\u56fe\u7247")})).catch((function(e){P("\u9009\u53d6\u56fe\u7247"),console.log(e)}))}),[y]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:g?"flex":"none",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement("div",{style:{display:"flex",backgroundColor:m,width:"100%",alignItems:"flex-end",flexDirection:"row-reverse",flexWrap:"wrap",justifyContent:"space-around",position:"relative"}},g&&o.a.createElement($,{style:{display:"block",position:"absolute",top:0,right:0},onClick:function(){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f.apply(void 0,["ImagePluginPanel"].concat(t))}(!1)}},"[ X ]"),Object.keys(k).map((function(e,a){return o.a.createElement(Ke,{key:e,item:e,picList:k,insertImageBlock:t,deleteImageBlock:n,setPicList:j})})),o.a.createElement("div",{style:{textAlign:"center",width:"100%"}},o.a.createElement("input",{type:"file",style:{display:"none"},ref:z,onClick:function(e){e.currentTarget.value=null},onChange:function(e){e.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)?x(e.currentTarget.files[0]):x(null)}}),o.a.createElement($,{style:{marginTop:"10px",marginBottom:"10px",marginRight:"10px"},onClick:function(e){x(null),z.current.click()},disabled:!!y},w),o.a.createElement($,{id:"button_history",style:{marginTop:"10px",marginBottom:"10px",marginLeft:"10px"},onClick:function(e){e.target.disabled=!0,i?c.get("".concat(b,"/picture/getpictureid/").concat(i)).then((function(e){var t=e.data;j((function(e){return Object(me.a)({},t,{},e)}))})).catch((function(e){document.getElementById("button_history").disabled=!1,console.log(e)})):(console.log("Please login first"),alert("please login first"))}},"\u4e4b\u524d\u56fe\u7247")))))}function Ke(e){var t=e.item,n=e.picList,r=e.insertImageBlock,i=e.deleteImageBlock,c=e.setPicList,l=(Object(be.a)(e,["item","picList","insertImageBlock","deleteImageBlock","setPicList"]),Object(a.useContext)(M)),s=l.axios,d=l.picDataList,f=l.setPicDataList,g=Object(a.useState)("\u52a0\u8f7d"),m=Object(u.a)(g,2),p=m[0],h=m[1];function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!0!==document.getElementById("button_load_".concat(e)).disabled){var a="".concat(b,"/picture/downloadpicture/").concat(n[e]),o=n[e];document.getElementById("button_delete_".concat(e)).disabled=!0,document.getElementById("button_load_".concat(e)).disabled=!0,d[n[e]]?(t(a,o,d[n[e]]),document.getElementById("button_delete_".concat(e)).disabled=!1,document.getElementById("button_load_".concat(e)).disabled=!1):(h("0%"),s.get(a,{responseType:"arraybuffer",onDownloadProgress:function(e){h((100*e.loaded/e.total).toFixed(0)+"%")}}).then((function(n){var r=btoa(new Uint8Array(n.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));f((function(e){return Object(me.a)({},e,Object(ye.a)({},o,"data:"+n.headers["content-type"]+";base64,"+r))})),t(a,o,"data:"+n.headers["content-type"]+";base64,"+r),document.getElementById("button_delete_".concat(e)).disabled=!1,document.getElementById("button_load_".concat(e)).disabled=!1})).catch((function(t){document.getElementById("button_delete_".concat(e)).disabled=!1,document.getElementById("button_load_".concat(e)).disabled=!1,console.log(t)})))}else alert("yes, id = ".concat(e," is in processing..."))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{key:t,style:{display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement(Ie,{id:t,isIcon:!0,style:{display:"block"},onClick:function(e){y(t,r)}}),o.a.createElement("div",null,o.a.createElement($,{id:"button_delete_".concat(t),onClick:function(e){document.getElementById("button_load_".concat(t)).disabled=!0,document.getElementById("button_delete_".concat(t)).disabled=!0,s.get("".concat(b,"/picture/deleteiconpicture/").concat(t,"/").concat(n[t])).then((function(){document.getElementById("button_load_".concat(t)).style.display=!1,document.getElementById("button_delete_".concat(t)).style.display=!1;var e=t,a=n[t];i(n[t]),c((function(t){var n=t;return Ne(e,n),Object(me.a)({},n)})),f((function(e){var t=e;return Ne(a,t),Object(me.a)({},t)}))})).catch((function(e){console.log(e),document.getElementById("button_load_".concat(t)).disabled=!1,document.getElementById("button_delete_".concat(t)).disabled=!1}))}},"\u5220\u9664"),o.a.createElement($,{id:"button_load_".concat(t),style:{display:d.hasOwnProperty(n[t])?"none":"inline"},onClick:function(e){y(t)}},p))))}function Ne(e,t){for(var n in t)~n.indexOf(e)&&delete t[n]}function Re(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t}var De=function(){var e=null,t=null;function n(n,a,o){var r=e.getSelection(),i=e.getCurrentContent(),c=i.getBlockForKey(r.getEndKey()),l=i.getBlockMap(),u=l.toSeq().takeUntil((function(e){return e===c})),s=l.toSeq().skipUntil((function(e){return e===c})).rest(),d=a+Re(),f=a+Re(),g=[[c.getKey(),c],[d,new _e.ContentBlock({key:d,type:"imageBlock",text:"",data:Te.b.fromJS({imgUrl:n,imgId:a,imgData:o})})],[f,new _e.ContentBlock({key:f,type:"unstyled",text:""})]],m=u.concat(g,s).toOrderedMap();i=i.merge({blockMap:m,selectionBefore:r,selectionAfter:r.merge({anchorKey:f,anchorOffset:0,focusKey:f,focusOffset:0,isBackward:!1,hasFocus:!0})}),e=_e.EditorState.push(e,i,"insert-fragment"),t(e)}function a(n){var a=e.getSelection(),o=e.getCurrentContent(),r=o.getBlockMap().toSeq().filter((function(e){return!("imageBlock"===e.getType()&&e.getKey().indexOf(n)>=0)&&!("unstyled"===e.getType()&&e.getKey().indexOf(n)>=0&&0===e.getText().length&&a.getFocusKey()!==e.getKey())})).toOrderedMap();o=o.merge({blockMap:r,selectionBefore:a,selectionAfter:a}),e=_e.EditorState.push(e,o,"remove-fragment"),t(e)}return{ImagePluginPanel:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Fe,{insertImageBlock:n,deleteImageBlock:a}))},imagePlugin:{onChange:function(n,a){var o=a.setEditorState;return t=o,e=n}}}}(),Ue=De.imagePlugin,He=De.ImagePluginPanel,Je=function(){var e=null,t=null,n="url(".concat(b,"/emoji/downloademoji/"),r={};function i(n){var a=e.getSelection().toArray(),o=Object(u.a)(a,6),r=o[0],i=o[1],c=o[2],l=o[3],s=o[4],d=(o[5],[s?c:r,s?l:i,s?r:c,s?i:l]),f=d[0],g=d[1],m=_e.Modifier.replaceText(e.getCurrentContent(),e.getSelection(),n),b=e.getSelection().merge({anchorKey:f,anchorOffset:g+n.length,focusKey:f,focusOffset:g+n.length,isBackward:!1,hasFocus:!0});e=_e.EditorState.push(e,m,"insert-characters"),e=_e.EditorState.acceptSelection(e,b),t(e)}function c(e){return Object.keys(r)[e%Object.keys(r).length]}return["\u2620","\u2764","\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69","\ud83d\udc7f","\ud83d\udc80","\ud83d\udca9","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude07","\ud83d\ude08","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude0e","\ud83d\ude0f","\ud83d\ude10","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude16","\ud83d\ude18","\ud83d\ude1a","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1e","\ud83d\ude20","\ud83d\ude21","\ud83d\ude22","\ud83d\ude23","\ud83d\ude24","\ud83d\ude25","\ud83d\ude28","\ud83d\ude29","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude2d","\ud83d\ude30","\ud83d\ude31","\ud83d\ude32","\ud83d\ude33","\ud83d\ude35","\ud83d\ude36","\ud83d\ude37","\ud83d\ude47\u200d\u2640\ufe0f","\ud83e\udd24","\ud83e\udd71"].forEach((function(e){r[e]=n+e+".png"})),{emojiPlugin:{keyBindingFn:function(e,t){t.getEditorState;if(e.ctrlKey&&e.shiftKey&&76===e.keyCode)return"add-emoji"},handleKeyCommand:function(e,t){return"add-emoji"!==e?"un-handled":"add-emoji"===e?(i(c(0)+" @tomK\u5927\u58f0\u9053"+c(1)),"emoji-adding-handled"):void 0},onChange:function(n,a){var o=a.setEditorState;return e=n,t=o,e=function(){var t=e.getSelection().toArray(),n=Object(u.a)(t,6),a=(n[0],n[1],n[2],n[3],n[4],n[5],e.getSelection()),o=e.getCurrentContent(),i=e.getSelection();return e.getCurrentContent().getBlocksAsArray().forEach((function(t){var n=t.getKey(),a=(t.getType(),t.getText());t.getCharacterList().forEach((function(t,a){t.getEntity()&&("EMOJI"===o.getEntity(t.getEntity()).getType()&&(i=e.getSelection().merge({anchorKey:n,anchorOffset:a,focusKey:n,focusOffset:a+1,isBackward:!1,hasFocus:!1}),o=_e.Modifier.applyEntity(o,i,null)))})),Object.keys(r).forEach((function(t){for(var c,l=new RegExp("".concat(t),"g"),u=[];null!==(c=l.exec(a));){var s=c.index;c.index,c[0].length;u.push(s)}u.forEach((function(a){var c=(o=o.createEntity("EMOJI","IMMUTABLE",{url:r[t]})).getLastCreatedEntityKey();i=e.getSelection().merge({anchorKey:n,anchorOffset:a,focusKey:n,focusOffset:a+t.length,isBackward:!1,hasFocus:!1}),o=_e.Modifier.applyEntity(o,i,c)}))}))})),e=_e.EditorState.push(e,o,"insert-characters"),e=_e.EditorState.acceptSelection(e,a)}()},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"EMOJI"===n.getEntity(t).getType()}),t)},component:function(e){e.contentState,e.entityKey,e.blockKey,e.offsetKey,e.start,e.end;var t=e.decoratedText,n=Object(a.useContext)(v).fontSize2,i=!Object(O.useMediaQuery)({query:"(hover: none)"}),c=Object(a.useRef)();return i?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{ref:c,className:"emoji",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",verticalAlign:"middle",backgroundImage:y.isFirefox?null:r[t],height:16*n+"px",minWidth:16*n+"px",lineHeight:n+"rem"}},o.a.createElement("span",{style:{clipPath:y.isFirefox?null:"circle(0% at 50% 50%)"}},e.children))):o.a.createElement("span",{className:"emoji_phone"},e.children)}}]},EmojiPluginPanel:function(){var e=Object(a.useContext)(Ze),t=e.showPlugin,n=e.toggleShow,c=Object(a.useContext)(v),l=c.fontSize1,u=(c.fontSize2,c.color2),s=t.EmojiPluginPanel;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:s?"block":"none",backgroundColor:u,width:"100%"}},o.a.createElement("button",{style:{float:"right",fontSize:l+"rem"},onClick:function(e){n("EmojiPluginPanel",!1)}},"[ X ]"),Object.keys(r).map((function(e,t){return o.a.createElement("button",{key:t,onMouseEnter:function(e){e.target.style.backgroundColor="lightgray"},onMouseOut:function(e){e.target.style.backgroundColor=null},onClick:function(t){i(e)},style:{color:"rgba(0,0,0,0)",borderWidth:"1px",backgroundImage:r[e],backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",fontSize:l+"rem",minWidth:16*l*1.2+"px"}},e)}))))},insertEmoji:i,getEmoji:c,getEmojiAll:function(){var e="";return Object.keys(r).forEach((function(t){e+=t})),e}}}(),qe=Je.emojiPlugin,Qe=(Je.insertEmoji,Je.getEmoji,Je.getEmojiAll,Je.EmojiPluginPanel),Ye=function(){var e=null,t=[],n=null,r=-123;function i(e){var t,n,i,l=e.mentionHeadKey,u=e.mentionBodyKey,s=(e.person,e.imgurl),d=e.mentionType,f=e.children,g=e.friendsList,m=e.entityKey,p=Object(a.useContext)(v).fontSize2;return"shortMentionOn"===d?o.a.createElement("span",{style:{display:"inline",backgroundColor:"wheat",position:"relative"}},o.a.createElement("div",{style:{lineHeight:"0px",minWidth:16*p*1.2+"px",display:"inline-block"}},f),!y.isMobile&&o.a.createElement("div",{style:{backgroundColor:"seashell",width:"max-content",position:"absolute",top:16*p*1.2+"px",left:"0px",zIndex:22,display:"flex",flexDirection:"column",opacity:1}},g.map((function(e,t){return o.a.createElement("div",{key:t,contentEditable:"false",suppressContentEditableWarning:"true",className:"personCard",style:{display:"flex",backgroundColor:r%g.length===t?"brown":""},onClick:function(t){c(e,l,u,m)}},o.a.createElement("img",{src:"".concat(b,"/avatar/downloadavatar/").concat(e),contentEditable:"false",suppressContentEditableWarning:"true",height:16*p*1.2+"px",width:16*p*1.2+"px",style:{clipPath:"circle(50% at 50% 50%)"}}),o.a.createElement("div",{contentEditable:"false",suppressContentEditableWarning:"true",style:{display:"block",position:"relative"}},o.a.createElement("img",{style:{backgroundColor:"brown",position:"absolute",width:"100%",top:0,height:"100%",opacity:"0.01"}}),e))})))):"shortMentionOff"===d?o.a.createElement("span",{style:{display:"inline",backgroundColor:"#AAF",position:"relative"}},o.a.createElement("div",{style:{lineHeight:"0px",minWidth:16*p*1.2+"px",display:"inline-block"}},f)):"longMentionOnAt_HEAD"===d?o.a.createElement("span",{style:{display:"inline",backgroundColor:"gold",position:"relative"}},o.a.createElement("div",{style:{lineHeight:"0px",minWidth:16*p*1.2+"px",display:"inline-block",alignItems:"center"}},f),!y.isMobile&&o.a.createElement("div",{style:{backgroundColor:"seashell",width:"max-content",position:"absolute",top:16*p*1.2+"px",left:"0px",zIndex:22,display:"flex",flexDirection:"column",opacity:1}},!y.isMobile&&g.map((function(e,t){return o.a.createElement("div",{key:t,contentEditable:"false",suppressContentEditableWarning:"true",className:"personCard",style:{display:"flex",backgroundColor:r%g.length===t?"brown":""},onClick:function(t){c(e,l,u,m)}},o.a.createElement("div",{contentEditable:"false",suppressContentEditableWarning:"true",style:{display:"flex"}},o.a.createElement("img",{src:"".concat(b,"/avatar/downloadavatar/").concat(e),contentEditable:"false",suppressContentEditableWarning:"true",height:16*p*1.2+"px",width:16*p*1.2+"px",style:{clipPath:"circle(50% at 50% 50%)"}})),o.a.createElement("div",{contentEditable:"false",suppressContentEditableWarning:"true",style:{flexGrow:100,display:"block",position:"relative"}},o.a.createElement("img",{style:{backgroundColor:"brown",position:"absolute",width:"100%",top:0,height:"100%",opacity:"0.01"}}),e))})))):"longMentionOnAt_BODY"===d?o.a.createElement("span",{style:(t={lineHeight:"0px",height:16*p*1.2+"px",display:"inline-flex",alignItems:"center"},Object(ye.a)(t,"display","inline"),Object(ye.a)(t,"backgroundColor","gold"),t)},f):"longMentionOnOther_HEAD"===d?o.a.createElement("span",{style:{display:"inline",backgroundColor:"pink"}},o.a.createElement("div",{style:{lineHeight:"0px",height:16*p*1.2+"px",minWidth:16*p*1.2+"px",display:"inline-flex",alignItems:"center"}},f)):"longMentionOnOther_BODY"===d?o.a.createElement("span",{style:(n={lineHeight:"0px",height:16*p*1.2+"px",display:"inline-flex",alignItems:"center"},Object(ye.a)(n,"display","inline"),Object(ye.a)(n,"backgroundColor","pink"),n)},f):"longMentionOff_HEAD"===d?o.a.createElement("span",{style:{display:"inline",backgroundColor:"#b7e1fc",borderTopLeftRadius:"1000px",borderBottomLeftRadius:"1000px"}},o.a.createElement("div",{style:{height:y.isMobile&&y.isFirefox?21.6*p*1.2+"px":16*p*1.2+"px",width:y.isMobile&&y.isFirefox?21.6*p*1.2+"px":16*p*1.2+"px",display:"inline-flex",alignItems:"center",color:"rgba(200,0,0,0)",backgroundColor:"purple",borderRadius:"1000px",backgroundPosition:"center center",backgroundImage:s,backgroundRepeat:"no-repeat",backgroundSize:"cover",boxShadow:"rgb(180, 180, 180) -2px 0px 3px"}},f)):"longMentionOff_BODY"===d?o.a.createElement("span",{style:(i={lineHeight:"0px",height:16*p*1.2+"px",display:"inline-flex",alignItems:"center"},Object(ye.a)(i,"display","inline"),Object(ye.a)(i,"backgroundColor","#b7e1fc"),i)},f):void 0}function c(t,a,o,r){var i=t+" ",c=e.getCurrentContent(),l=e.getSelection(),s=o?c.getEntity(o).getData().person.replace(" @",""):"",d=l.toArray(),f=Object(u.a)(d,6),g=f[0],m=f[1],b=f[2],p=f[3],h=f[4],y=(f[5],[h?b:g,h?p:m,h?g:b,h?m:p]),x=y[0],E=y[1],O=l.merge({anchorKey:x,anchorOffset:E,focusKey:x,focusOffset:E+s.length,isBackward:!1,hasFocus:!0}),v=_e.Modifier.replaceText(c,O,i);O=e.getSelection().merge({anchorKey:x,anchorOffset:E+i.length,focusKey:x,focusOffset:E+i.length,isBackward:!1,hasFocus:!0}),e=_e.EditorState.push(e,v,"insert-characters"),e=_e.EditorState.acceptSelection(e,O),n(e)}function l(){if(t.length<=0)return!1;var n=!1,a=e.getCurrentContent();return a.getBlocksAsArray().forEach((function(e){if(e.getCharacterList().forEach((function(e,o){var i=e.getEntity();if(i){var c=a.getEntity(i).getData(),l=c.mentionType,u=c.mentionHeadKey,s=c.mentionBodyKey;if(l){if("shortMentionOn"===l)return n=[t[r%t.length],"","",i];if(l.indexOf("longMentionOnAt")>=0)return n=[t[r%t.length],u,s,i]}}})),n)return n})),n}return{setFriendsList:function(e){t=e,r=-123===r?1e3*t.length:r},handleBeforeInput:function(t,a,o,r){var i=r.setEditorState;if(l()&&y.isMobile&&!y.isFirefox){n=i;var c=(e=a).getSelection().toArray(),s=Object(u.a)(c,6),d=(s[0],s[1],s[2],s[3],s[4],s[5],e.getSelection()),f=e.getCurrentContent();return d=d.merge({isBackward:!1,hasFocus:!0}),f=_e.Modifier.replaceText(f,d,t),d=d.merge({}),e=_e.EditorState.push(e,f,"insert-characters"),i(e=_e.EditorState.acceptSelection(e,d)),"handled"}},keyBindingFn:function(e,t){t.getEditorState,t.setEditorState,Object(be.a)(t,["getEditorState","setEditorState"]);return 40===e.keyCode&&l()?(r+=1,"fire-arrow"):38===e.keyCode&&l()?(r-=1,"fire-arrow"):13===e.keyCode&&l()?"fire-enter":void 0},onChange:function(t,a){var o=a.setEditorState;if(e=t,n=o,e=function(){var t=e.getSelection().toArray(),n=Object(u.a)(t,6),a=n[0],o=n[1],r=n[2],i=n[3],c=n[4],l=n[5],s=[c?r:a,c?i:o,c?a:r,c?o:i],d=s[2],f=s[3],g=e.getSelection(),m=e.getSelection(),p=e.getCurrentContent();return e.getCurrentContent().getBlocksAsArray().forEach((function(t){var n,a=t.getKey(),o=(t.getType(),t.getText()),r=/\s([@][\w_\[\u4E00-\u9FCA\]]*)/g;t.getCharacterList().forEach((function(t,n){t.getEntity()&&(p.getEntity(t.getEntity()).getType().indexOf("Mention")>=0&&(m=e.getSelection().merge({anchorKey:a,anchorOffset:n,focusKey:a,focusOffset:n+1,isBackward:!1,hasFocus:!1}),p=_e.Modifier.applyEntity(p,m,null)))}));for(var i=function(){var e=n.index,t=n.index+n[0].length,r=t-e,i=f-e,c=2===r&&(!l||a!==d||2!==i),u=r>2&&l&&a===d&&2===i,s=r>2&&l&&a===d&&2!==i&&i>0&&i<=r,g=r>2&&(!l||a!==d||i<=0||i>r);if(2===r&&l&&a===d&&2===i){var h=(p=p.createEntity("shortMentionOn","MUTABLE",{mentionType:"shortMentionOn"})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:t,isBackward:!1,hasFocus:!1}),p=_e.Modifier.applyEntity(p,m,h)}else if(c){var y=(p=p.createEntity("shortMentionOff","MUTABLE",{mentionType:"shortMentionOff"})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:t,isBackward:!1,hasFocus:!1}),p=_e.Modifier.applyEntity(p,m,y)}else u?x("longMentionOnAt"):s?x("longMentionOnOther"):g&&x("longMentionOff");function x(n){var r=(p=p.createEntity("".concat(n,"_HEAD"),"MUTABLE",{mentionType:"".concat(n,"_HEAD")})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:e+2,isBackward:!1,hasFocus:!1});var i=(p=(p=_e.Modifier.applyEntity(p,m,r)).createEntity("".concat(n,"_BODY"),"MUTABLE",{mentionType:"".concat(n,"_BODY")})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e+2,focusOffset:t,isBackward:!1,hasFocus:!1}),p=(p=(p=_e.Modifier.applyEntity(p,m,i)).mergeEntityData(r,{mentionHeadKey:r,mentionBodyKey:i,person:o.substring(e,t).replace(" @",""),imgurl:"url(".concat(b,"/avatar/downloadavatar/").concat(o.substring(e,t).replace(" @",""),")")})).mergeEntityData(i,{mentionHeadKey:r,mentionBodyKey:i,person:o.substring(e,t).replace(" @",""),imgurl:"url(".concat(b,"/avatar/downloadavatar/").concat(o.substring(e,t).replace(" @",""),")")})}};null!==(n=r.exec(o));)i()})),e=_e.EditorState.push(e,p,"insert-fragment"),e=_e.EditorState.acceptSelection(e,g)}(),Array.isArray(l())){var r=e.getSelection().toArray(),i=Object(u.a)(r,6),c=(i[0],i[1],i[2],i[3],i[4],i[5]);console.log(c)}return e},handleKeyCommand:function(t,a,o,r){r.setEditorState;return"fire-arrow"===t?(n(e),"handled"):"fire-enter"===t?(c.apply(void 0,Object(s.a)(l())),"handled"):void 0},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&n.getEntity(t).getType().indexOf("Mention")>=0}),t)},component:function(e){var n=e.contentState,a=e.entityKey,r=(e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText),l=n.getEntity(a).getData(),u=l.mentionHeadKey,s=l.mentionBodyKey,d=l.person,f=l.imgurl,g=l.mentionType;return o.a.createElement(i,Object(me.a)({inputFriendName:c,friendsList:t,decoratedText:r,entityKey:a,mentionHeadKey:u,mentionBodyKey:s,person:d,imgurl:f,mentionType:g},e))}}]}}(),Ve=function(){var e=null;function t(e){e.contentState,e.entityKey,e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText;var t=e.linkType,n=e.linkAddress,r=e.linkHost,i=Object(a.useContext)(v).fontSize2;return"linkOn"===t?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{href:n,style:{backgroundColor:"#FAF",fontSize:Math.max(.7*i,.7)+"rem"}},e.children)):"linkOff"===t?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{fontSize:Math.max(.7*i,.7)+"rem",color:"blue"}},o.a.createElement("span",{style:{width:"0px",height:"0px",display:"inline-block",overflow:"hidden"}},e.children),r)):void 0}return{keyBindingFn:function(e,t){t.getEditorState,t.setEditorState},handleKeyCommand:function(e,t,n){n.getEditorState,n.setEditorState;return"un-handled"},onChange:function(t,n){var a=n.setEditorState;return e=t,a,e=function(){var t=e.getSelection().toArray(),n=Object(u.a)(t,6),a=n[0],o=n[1],r=n[2],i=n[3],c=n[4],l=n[5],s=[c?r:a,c?i:o,c?a:r,c?o:i],d=s[2],f=s[3],g=e.getSelection(),m=e.getCurrentContent(),b=e.getSelection();return e.getCurrentContent().getBlocksAsArray().forEach((function(t){var n,a=t.getKey(),o=(t.getType(),t.getText()),r=/\s([a-zA-Z]{1,10}:\/\/)(([a-zA-Z0-9-_]+\.?)+(:\d{0,6})?)(\/[^\s\r\n\/]+){0,7}(\/)?/g;for(t.getCharacterList().forEach((function(t,n){if(t.getEntity()){var o=m.getEntity(t.getEntity()).getType();"linkOn"!==o&&"linkOff"!==o||(b=e.getSelection().merge({anchorKey:a,anchorOffset:n,focusKey:a,focusOffset:n+1,isBackward:!1,hasFocus:!1}),m=_e.Modifier.applyEntity(m,b,null))}t.getStyle()&&(t.getStyle().toArray().includes("linkStyle")&&(b=e.getSelection().merge({anchorKey:a,anchorOffset:n,focusKey:a,focusOffset:n+1,isBackward:!1,hasFocus:!1}),m=_e.Modifier.removeInlineStyle(m,b,"linkStyle")))}));null!==(n=r.exec(o));){var i=n.index,c=n.index+n[0].length,u=c-i,s=f-i,g=o.substring(i,c),p=" "+n[2],h=!l||a!==d||s<=0||s-u>0;if(l&&a===d&&s>0&&s<=u){var y=(m=m.createEntity("linkOn","MUTABLE",{linkType:"linkOn",linkAddress:g,linkHost:p})).getLastCreatedEntityKey();b=e.getSelection().merge({anchorKey:a,anchorOffset:i,focusKey:a,focusOffset:c,isBackward:!1,hasFocus:!1}),m=_e.Modifier.applyEntity(m,b,y)}else if(h){var x=(m=m.createEntity("linkOff","MUTABLE",{linkType:"linkOff",linkAddress:g,linkHost:p})).getLastCreatedEntityKey();b=e.getSelection().merge({anchorKey:a,anchorOffset:i,focusKey:a,focusOffset:c,isBackward:!1,hasFocus:!1}),m=_e.Modifier.applyEntity(m,b,x)}}})),e=_e.EditorState.push(e,m,"insert-fragment"),e=_e.EditorState.acceptSelection(e,g)}()},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&("linkOn"===n.getEntity(t).getType()||"linkOff"===n.getEntity(t).getType())}),t)},component:function(e){var n=e.contentState,a=e.entityKey,r=(e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText,n.getEntity(a).getData()),i=r.linkType,c=r.linkAddress,l=r.linkHost;return o.a.createElement(t,Object(me.a)({linkAddress:c,linkType:i,linkHost:l},e))}}]}}(),Xe={EmojiPluginPanel:o.a.createElement(Qe,null),ImagePluginPanel:o.a.createElement(He,null)},Ze=Object(a.createContext)();function $e(){var e=!y.isMobile,t=Object(a.useState)({EmojiPluginPanel:!1,ImagePluginPanel:!1}),n=Object(u.a)(t,2),r=n[0],i=n[1];function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i((function(e){return Object(me.a)({},e,Object(ye.a)({},t[0],1===t.length?!e[t[0]]:t[1]))}))}var l=Object(a.useState)(_e.EditorState.createEmpty()),d=Object(u.a)(l,2),f=d[0],g=d[1],m=Object(a.useState)(Object(Le.a)(f.getCurrentContent())),b=Object(u.a)(m,2),p=b[0],h=b[1],x=Object(a.useRef)(),E=Object(a.useState)(!1),O=Object(u.a)(E,2),k=O[0],j=O[1],S=Object(a.useContext)(v),C=S.fontSize2,w=S.editorWidth,P=Object(a.useContext)(M),z=(P.userName,P.uploadContentList),_=P.friendsList;Object(a.useMemo)((function(){Ye.setFriendsList(_)}),[_]);var B=w.width+"%",W=w.minWidth+"px",L=w.maxWidth+"px",A=Object(a.useState)([{key:tt(),panelName:"ImagePluginPanel"},{key:tt(),panelName:"EmojiPluginPanel"}]),T=Object(u.a)(A,2),I=T[0],F=T[1];function K(t){var n=Object(Le.a)(t.getCurrentContent(),{defaultBlockTag:"div",blockStyleFn:function(e){if("colorBlock"===e.getType())return{attributes:{className:"colorBlockClass"},style:{color:"#"+((1<<24)*Math.random()|0).toString(16)}}},blockRenderers:{imageBlock:function(e){e.getText();var t=e.getData().toObject();e.getType();return"<div><imgtag id=".concat(t.imgId," style=max-width:100%;display:block;margin-left:auto;margin-right:auto;/></div>")}},inlineStyles:{linkStyle:{style:Ae.linkStyle}},entityStyleFn:function(t){var n=t.toObject(),a=n.type,o=n.data;n.mutablity;return"EMOJI"===a&&e?{element:"span",style:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",verticalAlign:"middle",color:"rgba(0,0,0,0)",backgroundImage:o.url,minWidth:"".concat(16*C,"px"),height:"".concat(16*C,"px")}}:"EMOJI"!==a||e?"linkOff"===a||"linkOn"===a?{element:"mylink",attributes:{host:o.linkHost,address:o.linkAddress},style:{display:"hidden"}}:"shortMentionOff"===a?{element:"shortMentionoff"}:"longMentionOff_HEAD"===a?{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}}:"longMentionOff_BODY"===a?{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}}:"photo"===a?{element:"img",attributes:{src:t.getData().src},style:{display:"block",marginLeft:"auto",marginRight:"auto"}}:void 0:{element:"emoji_phone",attributes:{background_image:o.url}}}});h(n)}return Object(a.useEffect)((function(){K(f)}),[p]),o.a.createElement(Ze.Provider,{value:{showPlugin:r,toggleShow:c}},o.a.createElement("div",{style:{width:B,minWidth:W,maxWidth_:L,margin:"auto"}},I.map((function(e,t){var n=Xe[e.panelName];return o.a.createElement("div",{key:e.key},n)}))),o.a.createElement("div",{style:{width:B,minWidth:W,maxWidth_:L,margin:"auto"}},y.isMobile||o.a.createElement($,{onClick:function(e){F((function(e){var t=[];return[].concat(Object(s.a)(e.filter((function(e){return"EmojiPluginPanel"===e.panelName&&t.push(e),"EmojiPluginPanel"!==e.panelName}))),t)})),c("EmojiPluginPanel")}},"\u8868\u60c5"),o.a.createElement($,{onClick:function(e){F((function(e){var t=[];return[].concat(Object(s.a)(e.filter((function(e){return"ImagePluginPanel"===e.panelName&&t.push(e),"ImagePluginPanel"!==e.panelName}))),t)})),c("ImagePluginPanel")}},"\u56fe\u7247"),o.a.createElement($,{onClick:function(e){g(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unstyled",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=e.getCurrentContent().getBlockMap().toSeq();console.log(Object(s.a)(a));var o=tt(),r=[[o,new _e.ContentBlock({key:o,type:t,text:n})]],i=a.concat(r).toOrderedMap(),c=e.getCurrentContent().merge({blockMap:i,selectionBefore:e.getSelection(),selectionAfter:e.getSelection().merge({anchorKey:o,anchorOffset:0,focusKey:o,focusOffset:0,isBackward:!1,hasFocus:!0})});return _e.EditorState.push(e,c,"insert-fragment")}(f))}},"\u52a0\u884c")),o.a.createElement("div",{style:{backgroundColor:"#f9f9f9",borderStyle:"solid",borderWidth:"0px",borderTopWidth:"1px",borderBottomWidth:"1px",minHeight:"5rem",fontSize:C+"rem",width:B,minWidth:W,maxWidth_:L,margin:"auto",whiteSpace:"pre-line"},onClick:function(){x.current.focus()}},o.a.createElement(We.a,{editorState:f,customStyleFn:function(e,t){},blockRenderMap:Te.b.Map({imageBlock:{element:"figure"}}),blockRendererFn:function(e){e.getText();var t=e.getData().toObject();return"imageBlock"===e.getType()?{component:function(e){e.block,e.contentState;return o.a.createElement("img",{src:t.imgData,id:t.imgId,style:{maxWidth:.3*w.width+"%",display:"block",marginLeft:"auto",marginRight:"auto"}})},editable:!1}:null},blockStyleFn:function(e){if("unstyled"===e.getType())return"UnstyledBlockClass"},ref:function(e){x.current=e},plugins:[qe,Ve,Ye,Ue],handleKeyCommand:function(e,t,n,a){a.getEditorState;var o=_e.RichUtils.handleKeyCommand(t,e);return o?(g(o),"handled"):"not-handled"},onChange:function(e){K(e),g(e)},readOnly:k,stripPastedStyles:!0,handlePastedText:function(e,t,n){}})),o.a.createElement("hr",null),o.a.createElement("div",{style:{fontSize:C+"rem",margin:"auto",width:B,minWidth:W,maxWidth_:L,wordBreak:"break-all",whiteSpace:"pre-wrap"}},o.a.createElement($,{onClick:function(e){e.persist(),e.target.disabled=!0,j(!0),z(p).then((function(){g(_e.EditorState.createEmpty()),e.target.disabled=!1,j(!1)})).catch((function(e){e.target.disabled=!1,j(!1)}))}},"\u53d1\u9001")))}function Ge(e){var t=e.articleId,n=e.setCommentObj,r=e.setContentList,i=(Object(be.a)(e,["articleId","setCommentObj","setContentList"]),!y.isMobile),c=Object(a.useState)({EmojiPluginPanel:!1,ImagePluginPanel:!1}),l=Object(u.a)(c,2),d=l[0],f=l[1];function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f((function(e){return Object(me.a)({},e,Object(ye.a)({},t[0],1===t.length?!e[t[0]]:t[1]))}))}var m=Object(a.useState)(_e.EditorState.createEmpty()),p=Object(u.a)(m,2),h=p[0],x=p[1],E=Object(a.useState)(Object(Le.a)(h.getCurrentContent())),O=Object(u.a)(E,2),k=O[0],j=O[1],S=Object(a.useRef)(),C=Object(a.useState)(!1),w=Object(u.a)(C,2),P=w[0],z=w[1],_=Object(a.useContext)(v),B=_.fontSize2,W=_.editorWidth,L=Object(a.useContext)(M),A=L.userName,T=(L.uploadContentList,L.friendsList),I=L.axios;Object(a.useMemo)((function(){Ye.setFriendsList(T)}),[T]);var F=W.width+"%",K=W.minWidth+"px",N=W.maxWidth+"px",R=Object(a.useState)([{key:tt(),panelName:"ImagePluginPanel"},{key:tt(),panelName:"EmojiPluginPanel"}]),D=Object(u.a)(R,2),U=D[0],H=D[1];function J(e){var t=Object(Le.a)(e.getCurrentContent(),{defaultBlockTag:"div",entityStyleFn:function(e){var t=e.toObject(),n=t.type,a=t.data;t.mutablity;return"EMOJI"===n&&i?{element:"span",style:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",verticalAlign:"middle",color:"rgba(0,0,0,0)",backgroundImage:a.url,minWidth:"".concat(16*B,"px"),height:"".concat(16*B,"px")}}:"EMOJI"!==n||i?"linkOff"===n||"linkOn"===n?{element:"mylink",attributes:{host:a.linkHost,address:a.linkAddress},style:{display:"hidden"}}:"shortMentionOff"===n?{element:"shortMentionoff"}:"longMentionOff_HEAD"===n?{element:"longmentionoff_head",attributes:{imgurl:a.imgurl,person:a.person},style:{}}:"longMentionOff_BODY"===n?{element:"longmentionoff_body",attributes:{imgurl:a.imgurl,person:a.person}}:"photo"===n?{element:"img",attributes:{src:e.getData().src},style:{display:"block",marginLeft:"auto",marginRight:"auto"}}:void 0:{element:"emoji_phone",attributes:{background_image:a.url}}}});j(t)}return Object(a.useEffect)((function(){J(h)}),[k]),o.a.createElement(Ze.Provider,{value:{showPlugin:d,toggleShow:g}},o.a.createElement("div",{style:{width:"100%",minWidth:K,maxWidth_:N,margin:"auto",paddingLeft:"5%",paddingRight:"5%"}},U.map((function(e,t){var n=Xe[e.panelName];return o.a.createElement("div",{key:e.key},n)}))),o.a.createElement("div",{style:{width:F,minWidth:K,maxWidth_:N}}),o.a.createElement("div",{style:{backgroundColor:"#f9f9f9",borderStyle:"solid",borderWidth:"0px",borderTopWidth:"1px",borderBottomWidth:"1px",fontSize:B+"rem",width:"90%",margin:"auto",whiteSpace:"pre-line"},onClick:function(){S.current.focus()}},o.a.createElement(We.a,{editorState:h,blockStyleFn:function(e){if("unstyled"===e.getType())return"UnstyledBlockClass"},ref:function(e){S.current=e},plugins:[qe,Ve,Ye,Ue],handleKeyCommand:function(e,t,n,a){a.getEditorState;var o=_e.RichUtils.handleKeyCommand(t,e);return o?(x(o),"handled"):"not-handled"},onChange:function(e){J(e),x(e)},readOnly:P,stripPastedStyles:!0,handlePastedText:function(e,t,n){}})),o.a.createElement("div",{style:{fontSize:B+"rem",margin:"auto",minWidth:K,maxWidth_:N,wordBreak:"break-all",whiteSpace:"pre-wrap",paddingLeft:"5%",paddingRight:"5%"}},y.isMobile||o.a.createElement($,{onClick:function(e){H((function(e){var t=[];return[].concat(Object(s.a)(e.filter((function(e){return"EmojiPluginPanel"===e.panelName&&t.push(e),"EmojiPluginPanel"!==e.panelName}))),t)})),g("EmojiPluginPanel")}},"\u8868\u60c5"),o.a.createElement($,{onClick:function(e){return e.persist(),e.target.disabled=!0,z(!0),A&&I.post("".concat(b,"/comment"),{articleId:t,ownerName:A,content:k}).then((function(t){return x(_e.EditorState.createEmpty()),e.target.disabled=!1,z(!1),n((function(e){var n=t.data;return e[n.articleId].push(t.data),e[n.articleId]=e[n.articleId].sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})),Object(me.a)({},e)})),t})).then((function(){r((function(e){return e.map((function(e){return e._id!==t||e.commentNum++,e}))}))}))}},"\u53d1\u9001")))}function et(e){var t=e.commentId,n=e.setSubCommentObj,r=(Object(be.a)(e,["commentId","setSubCommentObj"]),!y.isMobile),i=Object(a.useState)({EmojiPluginPanel:!1,ImagePluginPanel:!1}),c=Object(u.a)(i,2),l=c[0],d=c[1];function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d((function(e){return Object(me.a)({},e,Object(ye.a)({},t[0],1===t.length?!e[t[0]]:t[1]))}))}var g=Object(a.useState)(_e.EditorState.createEmpty()),m=Object(u.a)(g,2),p=m[0],h=m[1],x=Object(a.useState)(Object(Le.a)(p.getCurrentContent())),E=Object(u.a)(x,2),O=E[0],k=E[1],j=Object(a.useRef)(),S=Object(a.useState)(!1),C=Object(u.a)(S,2),w=C[0],P=C[1],z=Object(a.useContext)(v),_=z.fontSize2,B=z.editorWidth,W=Object(a.useContext)(M),L=W.userName,A=(W.uploadContentList,W.friendsList),T=W.axios;Object(a.useMemo)((function(){Ye.setFriendsList(A)}),[A]);var I=B.width+"%",F=B.minWidth+"px",K=B.maxWidth+"px",N=Object(a.useState)([{key:tt(),panelName:"ImagePluginPanel"},{key:tt(),panelName:"EmojiPluginPanel"}]),R=Object(u.a)(N,2),D=R[0],U=R[1];function H(e){var t=Object(Le.a)(e.getCurrentContent(),{defaultBlockTag:"div",entityStyleFn:function(e){var t=e.toObject(),n=t.type,a=t.data;t.mutablity;return"EMOJI"===n&&r?{element:"span",style:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",verticalAlign:"middle",color:"rgba(0,0,0,0)",backgroundImage:a.url,minWidth:"".concat(16*_,"px"),height:"".concat(16*_,"px")}}:"EMOJI"!==n||r?"linkOff"===n||"linkOn"===n?{element:"mylink",attributes:{host:a.linkHost,address:a.linkAddress},style:{display:"hidden"}}:"shortMentionOff"===n?{element:"shortMentionoff"}:"longMentionOff_HEAD"===n?{element:"longmentionoff_head",attributes:{imgurl:a.imgurl,person:a.person},style:{}}:"longMentionOff_BODY"===n?{element:"longmentionoff_body",attributes:{imgurl:a.imgurl,person:a.person}}:void 0:{element:"emoji_phone",attributes:{background_image:a.url}}}});k(t)}return Object(a.useEffect)((function(){H(p)}),[O]),o.a.createElement(Ze.Provider,{value:{showPlugin:l,toggleShow:f}},o.a.createElement("div",{style:{width:"100%",minWidth:F,maxWidth_:K,margin:"auto",paddingLeft:"5%",paddingRight:"5%"}},D.map((function(e,t){var n=Xe[e.panelName];return o.a.createElement("div",{key:e.key},n)}))),o.a.createElement("div",{style:{width:I,minWidth:F,maxWidth_:K}}),o.a.createElement("div",{style:{backgroundColor:"#f9f9f9",borderStyle:"solid",borderWidth:"0px",borderTopWidth:"1px",borderBottomWidth:"1px",fontSize:_+"rem",width:"90%",margin:"auto",whiteSpace:"pre-line"},onClick:function(){j.current.focus()}},o.a.createElement(We.a,{editorState:p,blockStyleFn:function(e){if("unstyled"===e.getType())return"UnstyledBlockClass"},ref:function(e){j.current=e},plugins:[qe,Ve,Ye,Ue],handleKeyCommand:function(e,t,n,a){a.getEditorState;var o=_e.RichUtils.handleKeyCommand(t,e);return o?(h(o),"handled"):"not-handled"},onChange:function(e){H(e),h(e)},readOnly:w,stripPastedStyles:!0,handlePastedText:function(e,t,n){}})),o.a.createElement("div",{style:{fontSize:_+"rem",margin:"auto",minWidth:F,maxWidth_:K,wordBreak:"break-all",whiteSpace:"pre-wrap",paddingLeft:"5%",paddingRight:"5%"}},y.isMobile||o.a.createElement($,{onClick:function(e){U((function(e){var t=[];return[].concat(Object(s.a)(e.filter((function(e){return"EmojiPluginPanel"===e.panelName&&t.push(e),"EmojiPluginPanel"!==e.panelName}))),t)})),f("EmojiPluginPanel")}},"\u8868\u60c5"),o.a.createElement($,{onClick:function(e){return e.persist(),e.target.disabled=!0,P(!0),L&&T.post("".concat(b,"/subcomment"),{commentId:t,ownerName:L,content:O}).then((function(a){return h(_e.EditorState.createEmpty()),e.target.disabled=!1,P(!1),n((function(e){var n=a.data;return Array.isArray(e[t])||(e[t]=[]),e[t].push(n),e[t]=e[t].sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})),Object(me.a)({},e)})),a}))}},"\u53d1\u9001")))}function tt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t}var nt=n(221),at=n.n(nt);n(396);function ot(){var e=Object(a.useContext)(M),t=e.userName,n=e.contentList,r=e.setContentList,i=e.downloadContentList,c=e.deleteContentList,l=(e.friendsList,e.setFriendsList,e.uploadFriendsList,e.countContentNum),d=e.contentNum,f=Object(a.useContext)(v),g=f.fontSize2,p=f.editorWidth,h=f.color4,x=p.width,E=p.minWidth,O=p.maxWidth,k=x+"%",j=E+"px",S=O+"px",C=!y.isMobile,w=Object(a.useState)({}),P=Object(u.a)(w,2),z=P[0],_=P[1],B=Object(a.useState)({}),W=Object(u.a)(B,2),L=W[0],A=W[1];function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nothing to Render";e.indexOf("&nbsp;")>=0;)e=e.replace("&nbsp;"," ");return at()(e,{transform:function(e,t){return"imgtag"===e.name?o.a.createElement(Ie,{key:t,id:e.attribs.id,style:{maxWidth:.3*x+"%",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:function(e){return"100%"===e.target.style.maxWidth?e.target.style.maxWidth=.3*x+"%":e.target.style.maxWidth="100%"}}):"shortmentionoff"===e.name?o.a.createElement("span",{key:t,style:{display:"inline",backgroundColor:"#AAF",position:"relative"}},o.a.createElement("div",{style:{lineHeight:"0px",minWidth:16*g*1.2+"px",display:"inline-block"}},e.children.map((function(e){return e.data})))):"longmentionoff_head"===e.name?o.a.createElement(xe,{key:t,peopleName:e.attribs.person},e.children.map((function(e){return e.data}))):"longmentionoff_body"===e.name?o.a.createElement(Ee,{key:t},e.children.map((function(e){return e.data}))):"mylink"===e.name?o.a.createElement("a",{target:"_blank",key:t,style:{color:"blue",fontSize:Math.max(.7*g,.7)+"rem",cursor:"pointer"},onClick:function(t){t.target.innerHTML===e.attribs.host&&t.preventDefault(),t.target.innerHTML=e.attribs.address,t.target.href=e.attribs.address.substr(1)}},e.attribs.host):"emoji_phone"===e.name&&C?o.a.createElement("span",{key:t,style:{backgroundColor:"wheat",backgroundRepeat:"no-repeat",backgroundPosition:"left center",backgroundSize:"contain",display:"inline-block",verticalAlign:"middle",color:"rgba(0,0,0,0)",backgroundImage:e.attribs.background_image,minWidth:16*g+"px",height:"".concat(16*g,"px")}},e.children[0].data):"emoji_phone"!==e.name||C?void 0:o.a.createElement("span",{key:t},e.children[0].data)}})}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{fontSize:g+"rem",margin:"auto",marginBottom:"20px",width:k,minWidth:j,maxWidth_:S,wordBreak:"break-all",whiteSpace:"pre-wrap"}},n.map((function(e,n){return o.a.createElement("div",{key:e._id,id:e._id,style:{backgroundColor:h,marginBottom:"10px"}},o.a.createElement("div",{style:{paddingTop:"5px",paddingBottom:"5px",verticalAlign:"middle"}},o.a.createElement(Oe,{peopleName:e.ownerName,imgOnly:!1}),o.a.createElement("span",{style:{fontSize:.7*g+"rem"}},"\xa0\xa0",Object(ze.a)(new Date(e.postingTime),{locale:Me.a})),t===e.ownerName&&o.a.createElement($,{style:{},onClick:function(t){t.persist(),t.target.disabled=!0,c(e._id).catch((function(e){console.log(e),t.target.disabled=!1}))}},"\u5220\u9664"),t&&o.a.createElement($,{onClick:function(t){t.persist(),t.target.disabled=!0,m.get("".concat(b,"/comment/count/").concat(e._id)).then((function(t){var n=t.data;r((function(t){return t.map((function(t){return t._id!==e._id||(t.commentNum=n),t}))}))})),z[e._id]?(_((function(t){var n=t;return delete n[e._id],Object(me.a)({},n)})),t.target.disabled=!1):m.get("".concat(b,"/comment/").concat(e._id)).then((function(n){var a=n.data;_((function(t){var n=Object(ye.a)({},e._id,a);return Object(me.a)({},t,{},n)})),t.target.disabled=!1,A((function(e){return a.forEach((function(t){e[t._id]=Number(t.subCommentNum)})),console.log(e),Object(me.a)({},e)}))}))}},"\u8bc4\u8bba",e.commentNum)),o.a.createElement("div",null,T(e.content),o.a.createElement("div",null,z[e._id]&&o.a.createElement("hr",{style:{marginBottom:"5px"}}),z[e._id]&&o.a.createElement(Ge,{articleId:e._id,setCommentObj:_,setContentList:r}),function(){if(z[e._id])return z[e._id].sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})).map((function(n,a){return o.a.createElement("div",{key:a},o.a.createElement("div",{style:{verticalAlign:"middle",paddingLeft:"5%",paddingRight:"5%"}},o.a.createElement(xe,{peopleName:n.ownerName}," @"),o.a.createElement(Ee,null,n.ownerName),o.a.createElement("span",{style:{fontSize:.7*g+"rem"}},"\xa0\xa0",Object(ze.a)(new Date(n.postingTime),{locale:Me.a})),t===n.ownerName&&o.a.createElement($,{onClick:function(t){m.get("".concat(b,"/comment/delete/").concat(n._id)).then((function(){_((function(t){var a=t[e._id].filter((function(e){return e._id!==n._id}));return t[e._id]=a,Object(me.a)({},t)})),r((function(t){return t.map((function(t){return t._id!==e._id||t.commentNum--,t}))}))}))}},"\u5220\u9664"),o.a.createElement($,{onClick:function(){var e=n._id;Array.isArray(L[e])?m.get("".concat(b,"/subcomment/count/").concat(e)).then((function(t){A((function(n){return n[e]=Number(t.data),Object(me.a)({},n)}))})):m.get("".concat(b,"/subcomment/").concat(e)).then((function(t){var n=t.data;A((function(t){return Array.isArray(t[e])||(t[e]=[]),t[e]=Object(s.a)(n),Object(me.a)({},t)}))}))}},"\u56de\u590d",Array.isArray(L[n._id])?L[n._id].length:L[n._id])),o.a.createElement("div",{style:{paddingLeft:"5%",paddingRight:"5%"}},T(n.content),Array.isArray(L[n._id])&&o.a.createElement(et,{commentId:n._id,setSubCommentObj:A}),o.a.createElement("div",{style:{paddingLeft:"5%",paddingRight:"5%"}},function(){if(Array.isArray(L[n._id]))return L[n._id].map((function(e,a){return o.a.createElement("span",{key:a},o.a.createElement(xe,{peopleName:e.ownerName}," @"),o.a.createElement(Ee,null,e.ownerName),o.a.createElement("span",{style:{fontSize:.7*g+"rem"}},"\xa0\xa0",Object(ze.a)(new Date(e.postingTime),{locale:Me.a})),t===e.ownerName&&o.a.createElement($,{onClick:function(){m.get("".concat(b,"/subcomment/delete/").concat(e._id)).then((function(t){A((function(t){return t[n._id]=t[n._id].filter((function(t){return t._id!==e._id})),Object(me.a)({},t)}))}))}},"\u5220\u9664"),T(e.content))}))}())),o.a.createElement("hr",null))}))}())))})),t&&o.a.createElement($,{style:{width:"100%"},onClick:function(e){e.persist(),e.target.disabled=!0,i().then((function(){e.target.disabled=!1})),l()}},"\u52a0\u8f7d\u66f4\u591a",n.length,"/",d)))}function rt(){var e=Object(c.a)(["\n\n    position:fixed;\n    top:0;\n    left:0;\n    width:100vw;\n    height:100vh;\n    /* background-color:","; */\n    opacity:",";\n\n    /* background-color:","; */\n    background-image:",';\n    \n    /* background-image:url("http://192.168.0.103/api/backpicture/downloadbackpicture/aaa"); */\n    \n    background-size:',';\n\n\n\n    /* background-position: center; */\n    /* background-repeat:no-repeat; */\n   \n    /* background-position: left;\n    opacity:0.5; */\n   \n\n\n\n\n     /* Center the imagebackground-repeat: no-repeat; \n    /* Do not repeat the image */\n\n\n \n\n    /* background-image:     url("https://mernchen.herokuapp.com/api/picture/download/5f197ef0452cc60017f9f488"); */\n    /* background-image:   ',"   ;   */\n\n    overflow:auto;\n    z-index:-1;\n\n"]);return rt=function(){return e},e}function it(){var e=Object(c.a)(["\n\n\n    position:fixed;\n    top:0;\n    left:0;\n    width:100vw;\n    height:100vh;\n    background-color:",";\n    z-index:-2;\n\n"]);return it=function(){return e},e}var ct=l.b.div(it(),(function(e){return e.theme.color3})),lt=l.b.div(rt(),(function(e){return e.theme.color4}),(function(e){return e.theme.backPicOpacity}),(function(e){return e.theme.color3}),(function(e){var t=e.img;return"url(".concat(t,")")}),(function(e){return"horizontal"===e.oriantation?"100% auto":"auto 100%"}),(function(e){var t=e.url;return" url(".concat(t,"/backpicture/downloadbackpicture/aaa);")})),ut=function(){var e=Object(a.useContext)(M),t=(e.userAvatar,e.userBackPicture),n=(e.userName,e.axios,Object(a.useContext)(v)),r=n.backPicOrian;n.backPicOpacity;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ct,null),o.a.createElement(lt,{img:t,oriantation:r}))};function st(){var e=Object(c.a)(["\n    /* background-color:","; */\n\n"]);return st=function(){return e},e}l.b.div(st(),(function(e){return e.theme.color3}));function dt(){var e=Object(a.useContext)(M).userName;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ut,null),o.a.createElement(Pe,null),e&&o.a.createElement($e,null),o.a.createElement(ot,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ft=n(39);i.a.render(o.a.createElement(ft.a,null,o.a.createElement(_,null,o.a.createElement(j,null,o.a.createElement(dt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[223,1,2]]]);
//# sourceMappingURL=main.e19b993b.chunk.js.map